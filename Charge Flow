[
    {
        "id": "bd9b4d5049727d6f",
        "type": "tab",
        "label": "Lighting",
        "disabled": false,
        "info": ""
    },
    {
        "id": "48171d7e1459b81a",
        "type": "tab",
        "label": "Heating",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "fbc269aeb54e868f",
        "type": "tab",
        "label": "Shopping",
        "disabled": false,
        "info": ""
    },
    {
        "id": "aef8b42c9606cece",
        "type": "tab",
        "label": "Alarm System",
        "disabled": false,
        "info": ""
    },
    {
        "id": "22b9ea2795854293",
        "type": "tab",
        "label": "Media",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "d7eba63ab5d7339f",
        "type": "tab",
        "label": "Brew Father",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "6faab4fb07174dca",
        "type": "tab",
        "label": "Motion",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ba3a0a20bc4bf87e",
        "type": "tab",
        "label": "Alarm Checks",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "95da5cf0ee83e6bc",
        "type": "tab",
        "label": "Nextion Display",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "b8077327de2a9cf8",
        "type": "tab",
        "label": "CCTV",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "637a48558253d277",
        "type": "tab",
        "label": "Presence Faker",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "3698277d79b90b3b",
        "type": "tab",
        "label": "Fully Kiosk",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "9157fc893b015ee8",
        "type": "tab",
        "label": "Solar",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "0b7347763a54175c",
        "type": "group",
        "z": "48171d7e1459b81a",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [],
        "x": 0,
        "y": 0
    },
    {
        "id": "2083646db278a662",
        "type": "group",
        "z": "48171d7e1459b81a",
        "name": "Downstairs Heating",
        "style": {
            "label": true
        },
        "nodes": [
            "344a6ee66065a8b9",
            "b4f37341418d781c",
            "0bb4036a69adab79",
            "e58eaad87012e122",
            "de654e07c913867e"
        ],
        "x": 34,
        "y": 619
    },
    {
        "id": "2b67d6b79e80b902",
        "type": "group",
        "z": "48171d7e1459b81a",
        "name": "Upstairs Heating",
        "style": {
            "label": true
        },
        "nodes": [
            "32e588487961d814",
            "cc98e82c9e151322",
            "176104d5739f855c",
            "747a81391e10943b",
            "b59c41f2921f6b69"
        ],
        "x": 34,
        "y": 439
    },
    {
        "id": "6f6977cb11a855a9",
        "type": "group",
        "z": "b8077327de2a9cf8",
        "name": "Turn off Recordings",
        "style": {
            "stroke": "#ff0000",
            "label": true
        },
        "nodes": [
            "7c375f1518b62443",
            "b647f2ab316a51a9",
            "be8fbee24b9fa8da",
            "65be187ce008b99e"
        ],
        "x": 94,
        "y": 299
    },
    {
        "id": "b19edb919607bea2",
        "type": "group",
        "z": "b8077327de2a9cf8",
        "name": "Turn on Recordings",
        "style": {
            "stroke": "#92d04f",
            "label": true
        },
        "nodes": [
            "ed68fb2415b63493",
            "f137043fcd5e89d7",
            "984df9fd71a643e8",
            "fb65caac52969d15"
        ],
        "x": 94,
        "y": 519
    },
    {
        "id": "e42010beae8f7fa5",
        "type": "group",
        "z": "9157fc893b015ee8",
        "name": "Octopus Agile Prices",
        "style": {
            "label": true,
            "stroke": "#6f2fa0",
            "fill": "#dbcbe7",
            "color": "#001f60"
        },
        "nodes": [
            "db6ebccc4bb88b8d",
            "63bba87f93e0eaae",
            "65094b21c3938d73",
            "22fdc0bfd7bdd329",
            "3c0e6412766b7286",
            "0ba1d9b378092267",
            "416e22ecfcbf5616",
            "ce579e86db6fcc9b",
            "be04e63b7258b035",
            "4430da6cfe290e39",
            "3797b648d315c3a1",
            "bc4c506918ed4d9e",
            "b98e955f8996efa2",
            "c63c0e9f64999a1e",
            "a28359905d33b762",
            "59f0bbc0e3c76b0d",
            "aa94392fea62febc",
            "87bddd29d5e5ab90",
            "224dc5d34ebe8967",
            "8a65a4744d5f228a",
            "3c01c3e92c0898b2",
            "03b0c5c88010997c",
            "339092c8ec953466",
            "d8bb3057287698de",
            "a92b801c291d33d0",
            "56dd710454ea2e25",
            "ee45b426f60a08a0",
            "a9942de6076269cf",
            "4ea83473eb8ac581",
            "cbda3fa2b3b2f7be"
        ],
        "x": 14,
        "y": -1,
        "w": 982,
        "h": 462
    },
    {
        "id": "c525665.4e02f98",
        "type": "server",
        "name": "Home Assistant",
        "version": 5,
        "addon": true,
        "rejectUnauthorizedCerts": true,
        "ha_boolean": "y|yes|true|on|home|open",
        "connectionDelay": true,
        "cacheJson": true,
        "heartbeat": false,
        "heartbeatInterval": "30",
        "areaSelector": "friendlyName",
        "deviceSelector": "friendlyName",
        "entitySelector": "friendlyName",
        "statusSeparator": "at: ",
        "statusYear": "hidden",
        "statusMonth": "short",
        "statusDay": "numeric",
        "statusHourCycle": "h23",
        "statusTimeFormat": "h:m",
        "enableGlobalContextStore": true
    },
    {
        "id": "47d1a2e4eb7dedaf",
        "type": "alexa-remote-account",
        "name": "Mark Taylor",
        "authMethod": "proxy",
        "proxyOwnIp": "192.168.10.2",
        "proxyPort": "3456",
        "cookieFile": "",
        "refreshInterval": "3",
        "alexaServiceHost": "alexa.amazon.co.uk",
        "amazonPage": "amazon.co.uk",
        "acceptLanguage": "en-UK",
        "userAgent": "",
        "useWsMqtt": "on",
        "autoInit": "on"
    },
    {
        "id": "57c245f1390031a3",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "bd2796e43e591a28",
        "type": "ha-entity-config",
        "server": "c525665.4e02f98",
        "deviceConfig": "",
        "name": "sensor config for Black Spindel",
        "version": 6,
        "entityType": "sensor",
        "haConfig": [
            {
                "property": "name",
                "value": "Black_Spindel"
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "icon",
                "value": "mdi:beer"
            },
            {
                "property": "unit_of_measurement",
                "value": "SG"
            },
            {
                "property": "state_class",
                "value": ""
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "resend": true
    },
    {
        "id": "c85e8c93d3a907fd",
        "type": "ha-entity-config",
        "server": "c525665.4e02f98",
        "deviceConfig": "",
        "name": "sensor config for Black Spindel Battery",
        "version": 6,
        "entityType": "sensor",
        "haConfig": [
            {
                "property": "name",
                "value": "Black_Spindel_battery"
            },
            {
                "property": "device_class",
                "value": "voltage"
            },
            {
                "property": "icon",
                "value": "mdi:battery"
            },
            {
                "property": "unit_of_measurement",
                "value": "V"
            },
            {
                "property": "state_class",
                "value": ""
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "resend": true
    },
    {
        "id": "bc5ccfc43d0c6de5",
        "type": "ha-entity-config",
        "server": "c525665.4e02f98",
        "deviceConfig": "",
        "name": "sensor config for Black Spindel Temp",
        "version": 6,
        "entityType": "sensor",
        "haConfig": [
            {
                "property": "name",
                "value": "Black_Spindel_temp"
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "icon",
                "value": "mdi:temp"
            },
            {
                "property": "unit_of_measurement",
                "value": "C"
            },
            {
                "property": "state_class",
                "value": ""
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "resend": true
    },
    {
        "id": "b39f6580f1f052e5",
        "type": "ha-entity-config",
        "server": "c525665.4e02f98",
        "deviceConfig": "",
        "name": "sensor config for Red Spindel",
        "version": 6,
        "entityType": "sensor",
        "haConfig": [
            {
                "property": "name",
                "value": "Red_Spindel"
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "icon",
                "value": "mdi:beer"
            },
            {
                "property": "unit_of_measurement",
                "value": "SG"
            },
            {
                "property": "state_class",
                "value": ""
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "resend": true
    },
    {
        "id": "083b5cab9c094664",
        "type": "ha-entity-config",
        "server": "c525665.4e02f98",
        "deviceConfig": "",
        "name": "sensor config for Red Spindel Battery",
        "version": 6,
        "entityType": "sensor",
        "haConfig": [
            {
                "property": "name",
                "value": "Red_Spindel_battery"
            },
            {
                "property": "device_class",
                "value": "voltage"
            },
            {
                "property": "icon",
                "value": "mdi:battery"
            },
            {
                "property": "unit_of_measurement",
                "value": "V"
            },
            {
                "property": "state_class",
                "value": ""
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "resend": true
    },
    {
        "id": "df7ac1a8dd6e7567",
        "type": "ha-entity-config",
        "server": "c525665.4e02f98",
        "deviceConfig": "",
        "name": "sensor config for Red Spindel Temp",
        "version": 6,
        "entityType": "sensor",
        "haConfig": [
            {
                "property": "name",
                "value": "Red_Spindel_temp"
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "icon",
                "value": "mdi:temp"
            },
            {
                "property": "unit_of_measurement",
                "value": "C"
            },
            {
                "property": "state_class",
                "value": ""
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "resend": true
    },
    {
        "id": "5e39d678ae9c1c9e",
        "type": "ha-device-config",
        "name": "Unlock Door",
        "hwVersion": "",
        "manufacturer": "Node-RED",
        "model": "",
        "swVersion": ""
    },
    {
        "id": "91aa65811d949243",
        "type": "ha-entity-config",
        "server": "c525665.4e02f98",
        "deviceConfig": "5e39d678ae9c1c9e",
        "name": "Unlock Door",
        "version": "6",
        "entityType": "button",
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            },
            {
                "property": "entity_category",
                "value": ""
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "resend": false
    },
    {
        "id": "893ae24be6da2123",
        "type": "ha-entity-config",
        "server": "c525665.4e02f98",
        "deviceConfig": "",
        "name": "SC Oct Agile Prices",
        "version": "6",
        "entityType": "sensor",
        "haConfig": [
            {
                "property": "name",
                "value": "Octopus Agile Prices"
            },
            {
                "property": "icon",
                "value": ""
            },
            {
                "property": "entity_picture",
                "value": ""
            },
            {
                "property": "entity_category",
                "value": ""
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "unit_of_measurement",
                "value": ""
            },
            {
                "property": "state_class",
                "value": "measurement"
            }
        ],
        "resend": true,
        "debugEnabled": false
    },
    {
        "id": "6f8158bd34274dd3",
        "type": "ha-entity-config",
        "server": "c525665.4e02f98",
        "deviceConfig": "",
        "name": "SC Oct Agile Seq",
        "version": "6",
        "entityType": "sensor",
        "haConfig": [
            {
                "property": "name",
                "value": "Octopus Agile Sequence Table"
            },
            {
                "property": "icon",
                "value": ""
            },
            {
                "property": "entity_picture",
                "value": ""
            },
            {
                "property": "entity_category",
                "value": ""
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "unit_of_measurement",
                "value": ""
            },
            {
                "property": "state_class",
                "value": "measurement"
            }
        ],
        "resend": true,
        "debugEnabled": false
    },
    {
        "id": "0d2b39d0fae3c433",
        "type": "ha-entity-config",
        "server": "c525665.4e02f98",
        "deviceConfig": "",
        "name": "Lowest_Rate_for_Charging",
        "version": "6",
        "entityType": "sensor",
        "haConfig": [
            {
                "property": "name",
                "value": "Lowest Rate for Charging"
            },
            {
                "property": "icon",
                "value": ""
            },
            {
                "property": "entity_picture",
                "value": ""
            },
            {
                "property": "entity_category",
                "value": ""
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "unit_of_measurement",
                "value": ""
            },
            {
                "property": "state_class",
                "value": ""
            }
        ],
        "resend": false,
        "debugEnabled": false
    },
    {
        "id": "80d007cc61566ec2",
        "type": "bigtimer",
        "z": "bd9b4d5049727d6f",
        "outtopic": "control",
        "outpayload1": "open",
        "outpayload2": "closed",
        "name": "Turn on at Dusk",
        "comment": "",
        "lat": "51.54018186492846",
        "lon": "-1.7380886676749379",
        "starttime": "5001",
        "endtime": "120",
        "starttime2": 0,
        "endtime2": 0,
        "startoff": "-60",
        "endoff": 0,
        "startoff2": 0,
        "endoff2": 0,
        "offs": 0,
        "outtext1": "open",
        "outtext2": "closed",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": 0,
        "month7": 0,
        "day8": 0,
        "month8": 0,
        "day9": 0,
        "month9": 0,
        "day10": 0,
        "month10": 0,
        "day11": 0,
        "month11": 0,
        "day12": 0,
        "month12": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": 0,
        "xmonth7": 0,
        "xday8": 0,
        "xmonth8": 0,
        "xday9": 0,
        "xmonth9": 0,
        "xday10": 0,
        "xmonth10": 0,
        "xday11": 0,
        "xmonth11": 0,
        "xday12": 0,
        "xmonth12": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": true,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 100,
        "y": 40,
        "wires": [
            [],
            [],
            [
                "55de05866c4ea00f",
                "b60c72a2ebb192c6"
            ]
        ]
    },
    {
        "id": "bdb2d7c508c3f7cf",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "All Lights",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "light",
        "service": "turn_{{payload}}",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.all_lights"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 760,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "2f54b01c8356fb3d",
        "type": "bigtimer",
        "z": "bd9b4d5049727d6f",
        "outtopic": "",
        "outpayload1": "",
        "outpayload2": "",
        "name": "Emma Bedside Lamp Wake-Up",
        "comment": "",
        "lat": "51.54018186492846",
        "lon": "-1.7380886676749379",
        "starttime": "420",
        "endtime": "525",
        "starttime2": 0,
        "endtime2": 0,
        "startoff": 0,
        "endoff": 0,
        "startoff2": 0,
        "endoff2": 0,
        "offs": 0,
        "outtext1": "On",
        "outtext2": "Off",
        "timeout": 1440,
        "sun": false,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": false,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": 0,
        "month7": 0,
        "day8": 0,
        "month8": 0,
        "day9": 0,
        "month9": 0,
        "day10": 0,
        "month10": 0,
        "day11": 0,
        "month11": 0,
        "day12": 0,
        "month12": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": 0,
        "xmonth7": 0,
        "xday8": 0,
        "xmonth8": 0,
        "xday9": 0,
        "xmonth9": 0,
        "xday10": 0,
        "xmonth10": 0,
        "xday11": 0,
        "xmonth11": 0,
        "xday12": 0,
        "xmonth12": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": false,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 170,
        "y": 580,
        "wires": [
            [],
            [],
            [
                "cd3deb9a51e1d631"
            ]
        ]
    },
    {
        "id": "2636c20e2995c01e",
        "type": "api-current-state",
        "z": "bd9b4d5049727d6f",
        "name": "Occupied?",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.notify_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 410,
        "y": 640,
        "wires": [
            [
                "75686c59a1d063a4"
            ],
            []
        ]
    },
    {
        "id": "cd3deb9a51e1d631",
        "type": "switch",
        "z": "bd9b4d5049727d6f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "On",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Off",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 250,
        "y": 680,
        "wires": [
            [
                "2636c20e2995c01e"
            ],
            [
                "965ad4ce8e120994"
            ]
        ]
    },
    {
        "id": "965ad4ce8e120994",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Turn off at 8.30",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.bedroom_emma"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 220,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "75686c59a1d063a4",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Turn on at 07.00",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.bedroom_emma"
        ],
        "data": "{\"brightness\": 5}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 620,
        "y": 640,
        "wires": [
            [
                "8cbb44fceb847182",
                "f20491dcf50eb930"
            ]
        ]
    },
    {
        "id": "943b7a0fffa361de",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Increase Brightness",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.emma_bedroom"
        ],
        "data": "{\"brightness_step\": 10}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1100,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "7a7b89de110ab49f",
        "type": "comment",
        "z": "bd9b4d5049727d6f",
        "name": "Emma Bedside lamp turning on at 7.00 and increasing brightness",
        "info": "",
        "x": 230,
        "y": 500,
        "wires": []
    },
    {
        "id": "640cccdc1ffccd3f",
        "type": "api-current-state",
        "z": "bd9b4d5049727d6f",
        "name": "Home?",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.notify_home",
        "state_type": "str",
        "blockInputOverrides": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "on",
                "valueType": "str"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 820,
        "y": 40,
        "wires": [
            [
                "83a880e0efcfe9eb",
                "0dbd62ca9a056bf5",
                "cbbc1750907a5b57",
                "ebeedfbf6c4db776",
                "11f63730bf73c347"
            ],
            []
        ]
    },
    {
        "id": "1ccda801d1d3a853",
        "type": "link in",
        "z": "bd9b4d5049727d6f",
        "name": "Alarm Away",
        "links": [
            "52d0fdcf395955f0"
        ],
        "x": 175,
        "y": 300,
        "wires": [
            [
                "b561f9818ae2f5c5"
            ]
        ]
    },
    {
        "id": "55de05866c4ea00f",
        "type": "gate",
        "z": "bd9b4d5049727d6f",
        "name": "",
        "controlTopic": "control",
        "defaultState": "closed",
        "openCmd": "open",
        "closeCmd": "closed",
        "toggleCmd": "toggle",
        "defaultCmd": "default",
        "statusCmd": "status",
        "persist": true,
        "storeName": "memory",
        "x": 310,
        "y": 100,
        "wires": [
            [
                "080e999a393bf75a"
            ]
        ]
    },
    {
        "id": "b561f9818ae2f5c5",
        "type": "change",
        "z": "bd9b4d5049727d6f",
        "name": "Turn Off as Away",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 300,
        "wires": [
            [
                "bdb2d7c508c3f7cf",
                "be7df8ac0b17776a",
                "b2991bb493581d7a",
                "7a3a9067f781a5b5",
                "73bf92d4515cbb1f"
            ]
        ]
    },
    {
        "id": "8a04e9d2b0fa03a8",
        "type": "link in",
        "z": "bd9b4d5049727d6f",
        "name": "Alarm Home",
        "links": [
            "070e3c676a419a46"
        ],
        "x": 195,
        "y": 180,
        "wires": [
            [
                "29e4126b22352298"
            ]
        ]
    },
    {
        "id": "29e4126b22352298",
        "type": "change",
        "z": "bd9b4d5049727d6f",
        "name": "Return Home Turn on",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 180,
        "wires": [
            [
                "55de05866c4ea00f",
                "b2991bb493581d7a",
                "a9b6361e5838b2d2"
            ]
        ]
    },
    {
        "id": "87b313ac076fb5cf",
        "type": "inject",
        "z": "bd9b4d5049727d6f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "on",
        "payloadType": "str",
        "x": 370,
        "y": 380,
        "wires": [
            [
                "80d007cc61566ec2"
            ]
        ]
    },
    {
        "id": "080e999a393bf75a",
        "type": "switch",
        "z": "bd9b4d5049727d6f",
        "name": "Turn On / Off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "off",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 20,
        "wires": [
            [
                "bdb2d7c508c3f7cf"
            ],
            [
                "640cccdc1ffccd3f"
            ]
        ]
    },
    {
        "id": "30bcb71f7136c250",
        "type": "inject",
        "z": "bd9b4d5049727d6f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "off",
        "payloadType": "str",
        "x": 177,
        "y": 419,
        "wires": [
            [
                "80d007cc61566ec2"
            ]
        ]
    },
    {
        "id": "b60c72a2ebb192c6",
        "type": "change",
        "z": "bd9b4d5049727d6f",
        "name": "On/Off",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "closed",
                "fromt": "num",
                "to": "off",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "open",
                "fromt": "num",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 20,
        "wires": [
            [
                "080e999a393bf75a"
            ]
        ]
    },
    {
        "id": "be7df8ac0b17776a",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "TV Off",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.frontroom_tv_watch_tv",
            "switch.frontroom_watch_tv"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 670,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "4a7f63644e9c5fab",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Presence Simulator",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_{{payload}}",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.presence_simulation"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 890,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "b2991bb493581d7a",
        "type": "change",
        "z": "bd9b4d5049727d6f",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "on",
                "fromt": "str",
                "to": "off",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "off",
                "fromt": "str",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 240,
        "wires": [
            [
                "4a7f63644e9c5fab"
            ]
        ]
    },
    {
        "id": "871006a2239be91c",
        "type": "inject",
        "z": "bd9b4d5049727d6f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 560,
        "y": 580,
        "wires": [
            [
                "75686c59a1d063a4"
            ]
        ]
    },
    {
        "id": "0542e29ce870d258",
        "type": "inject",
        "z": "bd9b4d5049727d6f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "On",
        "payloadType": "str",
        "x": 180,
        "y": 540,
        "wires": [
            [
                "cd3deb9a51e1d631"
            ]
        ]
    },
    {
        "id": "73bf92d4515cbb1f",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Office lights",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "switch",
        "service": "turn_{{payload}}",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.office_shelf"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 890,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "83a880e0efcfe9eb",
        "type": "weekday",
        "z": "bd9b4d5049727d6f",
        "name": "Weekdays Only",
        "sun": false,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": false,
        "x": 1020,
        "y": 200,
        "wires": [
            [
                "a329ac8d1a7e016d"
            ],
            []
        ]
    },
    {
        "id": "0dbd62ca9a056bf5",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Living Room Lights",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "light",
        "service": "turn_{{payload}}",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.living_room"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1150,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "d87964320b882e51",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Turn On /  Off Kitchen Light 2",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.kitchen_2"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 520,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "a743caa04ec8e61f",
        "type": "server-events",
        "z": "bd9b4d5049727d6f",
        "name": "Kitchen Light 2",
        "server": "c525665.4e02f98",
        "version": 3,
        "exposeAsEntityConfig": "",
        "eventType": "esphome.kitchen_light2_press",
        "waitForRunning": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            }
        ],
        "x": 100,
        "y": 1100,
        "wires": [
            [
                "d87964320b882e51"
            ]
        ]
    },
    {
        "id": "08794819d80eae79",
        "type": "server-events",
        "z": "bd9b4d5049727d6f",
        "name": "Kitchen Light 3",
        "server": "c525665.4e02f98",
        "version": 3,
        "exposeAsEntityConfig": "",
        "eventType": "esphome.kitchen_light3_press",
        "waitForRunning": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            }
        ],
        "x": 100,
        "y": 1180,
        "wires": [
            [
                "bfa3463bb283bb6e"
            ]
        ]
    },
    {
        "id": "bfa3463bb283bb6e",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Turn On /  Off Kitchen Light 2",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.kitchen_3"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 500,
        "y": 1180,
        "wires": [
            []
        ]
    },
    {
        "id": "bcc65a1d4f8f57d9",
        "type": "server-state-changed",
        "z": "bd9b4d5049727d6f",
        "name": "No one in Living Room",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.living_room_occupied",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "away",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 140,
        "y": 1280,
        "wires": [
            [
                "0caa1ce7bce6256f"
            ],
            []
        ]
    },
    {
        "id": "0caa1ce7bce6256f",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Living Room Lights",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.living_room"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 470,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "fda9f2b15fd7696a",
        "type": "server-events",
        "z": "bd9b4d5049727d6f",
        "name": "Toilet",
        "server": "c525665.4e02f98",
        "version": 3,
        "exposeAsEntityConfig": "",
        "eventType": "esphome.toilet_light_press",
        "waitForRunning": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            }
        ],
        "x": 90,
        "y": 1400,
        "wires": [
            [
                "0d7c737cbd7f83b8"
            ]
        ]
    },
    {
        "id": "df25a998937d9ef7",
        "type": "server-events",
        "z": "bd9b4d5049727d6f",
        "name": "Conservatory",
        "server": "c525665.4e02f98",
        "version": 3,
        "exposeAsEntityConfig": "",
        "eventType": "esphome.conservatory_light_press",
        "waitForRunning": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            }
        ],
        "x": 110,
        "y": 1480,
        "wires": [
            [
                "b09d0adf19198159"
            ]
        ]
    },
    {
        "id": "b09d0adf19198159",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Turn On /  Off Conservatory",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.conservatory_relay"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 560,
        "y": 1480,
        "wires": [
            []
        ]
    },
    {
        "id": "6b09daeeb0c493a1",
        "type": "server-state-changed",
        "z": "bd9b4d5049727d6f",
        "name": "Someone in front room?",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.front_room_presence_presence",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "habool",
        "ifState": "false",
        "ifStateType": "bool",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": false,
        "for": "5",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "off",
                "valueType": "str"
            }
        ],
        "x": 990,
        "y": 420,
        "wires": [
            [
                "0dbd62ca9a056bf5",
                "ae2fadd80dcb3d25"
            ],
            []
        ]
    },
    {
        "id": "ae2fadd80dcb3d25",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "TV Off",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.frontroom_tv_watch_tv",
            "switch.frontroom_watch_tv"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1210,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "8cbb44fceb847182",
        "type": "trigger",
        "z": "bd9b4d5049727d6f",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "-5",
        "extend": false,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 850,
        "y": 680,
        "wires": [
            [
                "943b7a0fffa361de"
            ]
        ]
    },
    {
        "id": "f20491dcf50eb930",
        "type": "delay",
        "z": "bd9b4d5049727d6f",
        "name": "",
        "pauseType": "delay",
        "timeout": "30",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 470,
        "y": 720,
        "wires": [
            [
                "54f563d31f27fd6b"
            ]
        ]
    },
    {
        "id": "54f563d31f27fd6b",
        "type": "change",
        "z": "bd9b4d5049727d6f",
        "name": "Reset",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "reset",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 720,
        "wires": [
            [
                "8cbb44fceb847182"
            ]
        ]
    },
    {
        "id": "de66b8627e699c74",
        "type": "server-state-changed",
        "z": "bd9b4d5049727d6f",
        "name": "No one in Grace's Room",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.grace_room_presence_presence",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "away",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 150,
        "y": 1560,
        "wires": [
            [
                "9548ebde983df145",
                "842b40683c742e16"
            ],
            []
        ]
    },
    {
        "id": "9548ebde983df145",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Turn Off TV",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "remote",
        "service": "send_command",
        "areaId": [],
        "deviceId": [
            "01744b7ffc6af87257009a3d0843ae83"
        ],
        "entityId": [],
        "data": "{\"device\":\"Grace TV\",\"command\":\"power\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 450,
        "y": 1560,
        "wires": [
            []
        ]
    },
    {
        "id": "0d7c737cbd7f83b8",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Turn On /  Off Toilet",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.downstairs_toilet"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 510,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "bea48545d4e28918",
        "type": "server-state-changed",
        "z": "bd9b4d5049727d6f",
        "name": "Kitchen presence?",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.kitchen_presence_presence",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "habool",
        "ifState": "false",
        "ifStateType": "bool",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": false,
        "for": "5",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "off",
                "valueType": "str"
            }
        ],
        "x": 120,
        "y": 1000,
        "wires": [
            [
                "68c7cc0e43467f74"
            ],
            []
        ]
    },
    {
        "id": "68c7cc0e43467f74",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Kitchen Side Lights",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [
            "5803fc805beb8996bce87ab2de147b00"
        ],
        "entityId": [
            "switch.kitchen_side"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 390,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "7a3a9067f781a5b5",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Tablets Off",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.hall_tablet_screen",
            "switch.lenovo_tab_e10_screen_2"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 650,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "a9b6361e5838b2d2",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Tablets On",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.hall_tablet_screen",
            "switch.lenovo_tab_e10_screen_2"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 590,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "842b40683c742e16",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Turn off G Bedroom Lights",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.grace_main"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 460,
        "y": 1620,
        "wires": [
            []
        ]
    },
    {
        "id": "5e5e9c740fb9de2e",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Kitchen Island Lights",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [
            "5803fc805beb8996bce87ab2de147b00"
        ],
        "entityId": [
            "light.kitchen_island"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 400,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "cbbc1750907a5b57",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Kitchen Island",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "light",
        "service": "turn_{{payload}}",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.kitchen_island"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1160,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "a329ac8d1a7e016d",
        "type": "time-range-switch",
        "z": "bd9b4d5049727d6f",
        "name": "Winter Time",
        "lat": "51.54018186492846",
        "lon": "-1.7380886676749379",
        "startTime": "12:00",
        "endTime": "17:30",
        "startOffset": 0,
        "endOffset": 0,
        "x": 1130,
        "y": 240,
        "wires": [
            [
                "73bf92d4515cbb1f"
            ],
            [
                "7002033d9a43de5c"
            ]
        ]
    },
    {
        "id": "7002033d9a43de5c",
        "type": "change",
        "z": "bd9b4d5049727d6f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1100,
        "y": 300,
        "wires": [
            [
                "73bf92d4515cbb1f"
            ]
        ]
    },
    {
        "id": "ebeedfbf6c4db776",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Kitchen Plinth",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "light",
        "service": "turn_{{payload}}",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.plinth"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1160,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "11f63730bf73c347",
        "type": "api-call-service",
        "z": "bd9b4d5049727d6f",
        "name": "Piano",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "light",
        "service": "turn_{{payload}}",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.piano"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1130,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "30e2908e83e98abe",
        "type": "ha-zone",
        "z": "48171d7e1459b81a",
        "name": "Leaving Swindon",
        "server": "c525665.4e02f98",
        "version": 1,
        "exposeAsEntityConfig": "",
        "entities": [
            "person.mark_taylor",
            "person.emma_neal"
        ],
        "event": "leave",
        "zones": [
            "zone.swindon_dont_adjust_heating"
        ],
        "x": 140,
        "y": 100,
        "wires": [
            [
                "c8aa888b1cdc61b9"
            ]
        ]
    },
    {
        "id": "c6f4fc12dc3caf43",
        "type": "api-call-service",
        "z": "48171d7e1459b81a",
        "name": "Turn Off Heating",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [
            "30467ecc4c62bd74b8cc5d2a8bf1063c",
            "22f58aee5c5e07c5930c65edd171af88"
        ],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1020,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "c401c88ef671b62d",
        "type": "ha-zone",
        "z": "48171d7e1459b81a",
        "name": "Entering Swindon",
        "server": "c525665.4e02f98",
        "version": 1,
        "exposeAsEntityConfig": "",
        "entities": [
            "person.mark_taylor",
            "person.emma_neal"
        ],
        "event": "enter",
        "zones": [
            "zone.swindon_dont_adjust_heating"
        ],
        "x": 140,
        "y": 400,
        "wires": [
            [
                "25b1cbb74fb10575"
            ]
        ]
    },
    {
        "id": "9d5bd1ba03c50e42",
        "type": "api-call-service",
        "z": "48171d7e1459b81a",
        "name": "Turn On Heating",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_temperature",
        "areaId": [],
        "deviceId": [
            "22f58aee5c5e07c5930c65edd171af88"
        ],
        "entityId": [],
        "data": "{\"temperature\":21}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 680,
        "y": 200,
        "wires": [
            [
                "3ae421a9a09c22b3"
            ]
        ]
    },
    {
        "id": "84a62b32e8f6c1cc",
        "type": "api-current-state",
        "z": "48171d7e1459b81a",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "<17",
        "halt_if_type": "re",
        "halt_if_compare": "is",
        "entity_id": "climate.downstairs",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 420,
        "y": 260,
        "wires": [
            [
                "8075cd6a891209cd"
            ],
            []
        ]
    },
    {
        "id": "d3d8209b24189944",
        "type": "api-current-state",
        "z": "48171d7e1459b81a",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "<17",
        "halt_if_type": "re",
        "halt_if_compare": "is",
        "entity_id": "climate.upstairs",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 410,
        "y": 200,
        "wires": [
            [
                "9d5bd1ba03c50e42"
            ],
            []
        ]
    },
    {
        "id": "8075cd6a891209cd",
        "type": "api-call-service",
        "z": "48171d7e1459b81a",
        "name": "Turn On Heating",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_temperature",
        "areaId": [],
        "deviceId": [
            "22f58aee5c5e07c5930c65edd171af88"
        ],
        "entityId": [],
        "data": "{\"temperature\":21}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 680,
        "y": 260,
        "wires": [
            [
                "3ae421a9a09c22b3"
            ]
        ]
    },
    {
        "id": "3ae421a9a09c22b3",
        "type": "delay",
        "z": "48171d7e1459b81a",
        "name": "",
        "pauseType": "delay",
        "timeout": "30",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 890,
        "y": 220,
        "wires": [
            [
                "c6f4fc12dc3caf43"
            ]
        ]
    },
    {
        "id": "c8aa888b1cdc61b9",
        "type": "api-current-state",
        "z": "48171d7e1459b81a",
        "name": "Home?",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.notify_home",
        "state_type": "str",
        "blockInputOverrides": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "on",
                "valueType": "str"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 420,
        "y": 100,
        "wires": [
            [],
            [
                "c6f4fc12dc3caf43"
            ]
        ]
    },
    {
        "id": "25b1cbb74fb10575",
        "type": "api-current-state",
        "z": "48171d7e1459b81a",
        "name": "Home?",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.notify_home",
        "state_type": "str",
        "blockInputOverrides": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "on",
                "valueType": "str"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 160,
        "y": 240,
        "wires": [
            [],
            [
                "d3d8209b24189944",
                "84a62b32e8f6c1cc"
            ]
        ]
    },
    {
        "id": "32e588487961d814",
        "type": "bigtimer",
        "z": "48171d7e1459b81a",
        "g": "2b67d6b79e80b902",
        "outtopic": "",
        "outpayload1": "On",
        "outpayload2": "Off",
        "name": "Heating Upstairs",
        "comment": "",
        "lat": "51.54018186492846",
        "lon": "-1.7380886676749379",
        "starttime": "420",
        "endtime": "1290",
        "starttime2": "0",
        "endtime2": "0",
        "startoff": "0",
        "endoff": 0,
        "startoff2": 0,
        "endoff2": 0,
        "offs": 0,
        "outtext1": "On",
        "outtext2": "Off",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": 0,
        "month7": 0,
        "day8": 0,
        "month8": 0,
        "day9": 0,
        "month9": 0,
        "day10": 0,
        "month10": 0,
        "day11": 0,
        "month11": 0,
        "day12": 0,
        "month12": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": 0,
        "xmonth7": 0,
        "xday8": 0,
        "xmonth8": 0,
        "xday9": 0,
        "xmonth9": 0,
        "xday10": 0,
        "xmonth10": 0,
        "xday11": 0,
        "xmonth11": 0,
        "xday12": 0,
        "xmonth12": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": false,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 150,
        "y": 540,
        "wires": [
            [
                "b59c41f2921f6b69"
            ],
            [],
            []
        ]
    },
    {
        "id": "cc98e82c9e151322",
        "type": "api-call-service",
        "z": "48171d7e1459b81a",
        "g": "2b67d6b79e80b902",
        "name": "Turn On Heating",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "climate",
        "service": "set_temperature",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.upstairs"
        ],
        "data": "{\"temperature\":20, \"hvac_mode\":\"auto\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 660,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "176104d5739f855c",
        "type": "api-call-service",
        "z": "48171d7e1459b81a",
        "g": "2b67d6b79e80b902",
        "name": "Turn Off Heating",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_temperature",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.upstairs"
        ],
        "data": "{\"temperature\":7, \"hvac_mode\":\"auto\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 660,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "747a81391e10943b",
        "type": "switch",
        "z": "48171d7e1459b81a",
        "g": "2b67d6b79e80b902",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "On",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Off",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 510,
        "y": 520,
        "wires": [
            [
                "cc98e82c9e151322"
            ],
            [
                "176104d5739f855c"
            ]
        ]
    },
    {
        "id": "344a6ee66065a8b9",
        "type": "bigtimer",
        "z": "48171d7e1459b81a",
        "g": "2083646db278a662",
        "outtopic": "",
        "outpayload1": "On",
        "outpayload2": "Off",
        "name": "Heating Downstairs",
        "comment": "",
        "lat": "51.54018186492846",
        "lon": "-1.7380886676749379",
        "starttime": "480",
        "endtime": "1320",
        "starttime2": "0",
        "endtime2": "0",
        "startoff": "0",
        "endoff": 0,
        "startoff2": 0,
        "endoff2": 0,
        "offs": 0,
        "outtext1": "On",
        "outtext2": "Off",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": 0,
        "month7": 0,
        "day8": 0,
        "month8": 0,
        "day9": 0,
        "month9": 0,
        "day10": 0,
        "month10": 0,
        "day11": 0,
        "month11": 0,
        "day12": 0,
        "month12": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": 0,
        "xmonth7": 0,
        "xday8": 0,
        "xmonth8": 0,
        "xday9": 0,
        "xmonth9": 0,
        "xday10": 0,
        "xmonth10": 0,
        "xday11": 0,
        "xmonth11": 0,
        "xday12": 0,
        "xmonth12": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": false,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 150,
        "y": 700,
        "wires": [
            [
                "de654e07c913867e"
            ],
            [],
            []
        ]
    },
    {
        "id": "b4f37341418d781c",
        "type": "api-call-service",
        "z": "48171d7e1459b81a",
        "g": "2083646db278a662",
        "name": "Turn Off Heating",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_temperature",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.downstairs"
        ],
        "data": "{\"temperature\":7, \"hvac_mode\":\"auto\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 680,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "0bb4036a69adab79",
        "type": "switch",
        "z": "48171d7e1459b81a",
        "g": "2083646db278a662",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "On",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Off",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 490,
        "y": 700,
        "wires": [
            [
                "e58eaad87012e122"
            ],
            [
                "b4f37341418d781c"
            ]
        ]
    },
    {
        "id": "e58eaad87012e122",
        "type": "api-call-service",
        "z": "48171d7e1459b81a",
        "g": "2083646db278a662",
        "name": "Turn On Heating",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "climate",
        "service": "set_temperature",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.downstairs"
        ],
        "data": "{\"temperature\":21,\"hvac_mode\":\"auto\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 680,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "b59c41f2921f6b69",
        "type": "api-current-state",
        "z": "48171d7e1459b81a",
        "g": "2b67d6b79e80b902",
        "name": "Home?",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.notify_home",
        "state_type": "str",
        "blockInputOverrides": true,
        "outputProperties": [],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 360,
        "y": 520,
        "wires": [
            [
                "747a81391e10943b"
            ],
            []
        ]
    },
    {
        "id": "de654e07c913867e",
        "type": "api-current-state",
        "z": "48171d7e1459b81a",
        "g": "2083646db278a662",
        "name": "Home?",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.notify_home",
        "state_type": "str",
        "blockInputOverrides": true,
        "outputProperties": [],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 340,
        "y": 700,
        "wires": [
            [
                "0bb4036a69adab79"
            ],
            []
        ]
    },
    {
        "id": "2d80d274c16aad28",
        "type": "alexa-remote-list",
        "z": "fbc269aeb54e868f",
        "name": "Get Shopping List",
        "account": "47d1a2e4eb7dedaf",
        "config": {
            "option": "getListItems",
            "value": {
                "list": {
                    "type": "str",
                    "value": "YW16bjEuYWNjb3VudC5BRUxaQ1cyTEJGSk5FSzVHSlRPSkc1R09BSVFBLVNIT1BQSU5HX0lURU0="
                }
            }
        },
        "x": 470,
        "y": 300,
        "wires": [
            [
                "b8bee3d73322cc21"
            ]
        ]
    },
    {
        "id": "d0207f518a863400",
        "type": "api-call-service",
        "z": "fbc269aeb54e868f",
        "name": "Mark",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_f926b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": payload}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 810,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "b8bee3d73322cc21",
        "type": "template",
        "z": "fbc269aeb54e868f",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{{#payload}}\n{{value}}\n{{/payload}}",
        "output": "str",
        "x": 660,
        "y": 300,
        "wires": [
            [
                "d0207f518a863400",
                "53b02fc29edac4cf",
                "763fc8880e0a208d"
            ]
        ]
    },
    {
        "id": "4059ce76fb2ea274",
        "type": "ha-zone",
        "z": "fbc269aeb54e868f",
        "name": "At the Shops",
        "server": "c525665.4e02f98",
        "version": 1,
        "exposeAsEntityConfig": "",
        "entities": [
            "person.mark_taylor",
            "person.emma_neal"
        ],
        "event": "enter",
        "zones": [
            "zone.morrisons"
        ],
        "x": 230,
        "y": 300,
        "wires": [
            [
                "2d80d274c16aad28"
            ]
        ]
    },
    {
        "id": "53b02fc29edac4cf",
        "type": "api-call-service",
        "z": "fbc269aeb54e868f",
        "name": "Emma",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_g996b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": payload}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 810,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "87ebb398508e3a7a",
        "type": "api-call-service",
        "z": "fbc269aeb54e868f",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "shopping_list",
        "service": "add_item",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"name\": payload}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 900,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "763fc8880e0a208d",
        "type": "split",
        "z": "fbc269aeb54e868f",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 670,
        "y": 440,
        "wires": [
            [
                "87ebb398508e3a7a"
            ]
        ]
    },
    {
        "id": "3bb27df6b19d8a6f",
        "type": "server-state-changed",
        "z": "aef8b42c9606cece",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "person.mark_taylor",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "not_home",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "5",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 270,
        "y": 140,
        "wires": [
            [
                "c47dbda001c4345b"
            ],
            [
                "29b8c38789070b51"
            ]
        ]
    },
    {
        "id": "1bdb9d492c51e567",
        "type": "server-state-changed",
        "z": "aef8b42c9606cece",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "person.emma_neal",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "not_home",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "5",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 270,
        "y": 200,
        "wires": [
            [
                "c47dbda001c4345b"
            ],
            [
                "29b8c38789070b51"
            ]
        ]
    },
    {
        "id": "b6edfb62c511ef90",
        "type": "server-state-changed",
        "z": "aef8b42c9606cece",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "person.abigail_taylor",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "not_home",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "5",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 270,
        "y": 260,
        "wires": [
            [
                "c47dbda001c4345b"
            ],
            [
                "29b8c38789070b51"
            ]
        ]
    },
    {
        "id": "29b8c38789070b51",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Set Home to Occupied",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.notify_home"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 760,
        "y": 80,
        "wires": [
            [
                "070e3c676a419a46"
            ]
        ]
    },
    {
        "id": "c47dbda001c4345b",
        "type": "api-current-state",
        "z": "aef8b42c9606cece",
        "name": "Mark",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "person.mark_taylor",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 730,
        "y": 180,
        "wires": [
            [
                "29b8c38789070b51"
            ],
            [
                "87943644fa0f7185"
            ]
        ]
    },
    {
        "id": "f64a7654f9b1a65b",
        "type": "api-current-state",
        "z": "aef8b42c9606cece",
        "name": "Abigail",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "person.abigail_taylor",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 730,
        "y": 300,
        "wires": [
            [
                "29b8c38789070b51"
            ],
            [
                "acd108a5920adc1a"
            ]
        ]
    },
    {
        "id": "87943644fa0f7185",
        "type": "api-current-state",
        "z": "aef8b42c9606cece",
        "name": "Emma",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "person.emma_neal",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 730,
        "y": 240,
        "wires": [
            [
                "29b8c38789070b51"
            ],
            [
                "f64a7654f9b1a65b"
            ]
        ]
    },
    {
        "id": "fda11f931f52d52c",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Set Home to Away",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.notify_home"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "turn_off",
                "valueType": "str"
            }
        ],
        "queue": "none",
        "x": 770,
        "y": 500,
        "wires": [
            [
                "52d0fdcf395955f0"
            ]
        ]
    },
    {
        "id": "40ae73a6917d97cb",
        "type": "bigtimer",
        "z": "aef8b42c9606cece",
        "outtopic": "",
        "outpayload1": "On",
        "outpayload2": "Off",
        "name": "Midnight to 0700",
        "comment": "",
        "lat": "51.530266009202776",
        "lon": "-2.581656163254892",
        "starttime": "0",
        "endtime": "420",
        "starttime2": 0,
        "endtime2": 0,
        "startoff": 0,
        "endoff": 0,
        "startoff2": 0,
        "endoff2": 0,
        "offs": 0,
        "outtext1": "Arm",
        "outtext2": "Disarm",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": 0,
        "month7": 0,
        "day8": 0,
        "month8": 0,
        "day9": 0,
        "month9": 0,
        "day10": 0,
        "month10": 0,
        "day11": 0,
        "month11": 0,
        "day12": 0,
        "month12": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": 0,
        "xmonth7": 0,
        "xday8": 0,
        "xmonth8": 0,
        "xday9": 0,
        "xmonth9": 0,
        "xday10": 0,
        "xmonth10": 0,
        "xday11": 0,
        "xmonth11": 0,
        "xday12": 0,
        "xmonth12": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": true,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 150,
        "y": 620,
        "wires": [
            [],
            [],
            [
                "c42fa01264c13ec6"
            ]
        ]
    },
    {
        "id": "c42fa01264c13ec6",
        "type": "switch",
        "z": "aef8b42c9606cece",
        "name": "Arm / Disarm",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Arm",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Disarm",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 640,
        "wires": [
            [
                "16e4c8d41fcdc61d"
            ],
            [
                "5c4d459c5a4079a0"
            ]
        ]
    },
    {
        "id": "16f8371302afac57",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Disarm",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "alarm_control_panel",
        "service": "alarm_disarm",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "alarm_control_panel.house_alarm"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 740,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "5c4d459c5a4079a0",
        "type": "api-current-state",
        "z": "aef8b42c9606cece",
        "name": "Occupied",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.notify_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 560,
        "y": 680,
        "wires": [
            [
                "16f8371302afac57"
            ],
            []
        ]
    },
    {
        "id": "52d0fdcf395955f0",
        "type": "link out",
        "z": "aef8b42c9606cece",
        "name": "Alarm Away",
        "mode": "link",
        "links": [
            "1ccda801d1d3a853",
            "f70ac3fdc2fb0906",
            "ed68fb2415b63493"
        ],
        "x": 1035,
        "y": 500,
        "wires": []
    },
    {
        "id": "070e3c676a419a46",
        "type": "link out",
        "z": "aef8b42c9606cece",
        "name": "Alarm Home",
        "links": [
            "8a04e9d2b0fa03a8",
            "a35193dd1c8e0862",
            "7c375f1518b62443"
        ],
        "x": 1015,
        "y": 200,
        "wires": []
    },
    {
        "id": "c7331146d3c257ab",
        "type": "server-events",
        "z": "aef8b42c9606cece",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 3,
        "exposeAsEntityConfig": "",
        "eventType": "zwave_js_notification",
        "waitForRunning": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            }
        ],
        "x": 140,
        "y": 820,
        "wires": [
            [
                "538d8828939b7e26",
                "cd047b6b7c2d848d"
            ]
        ]
    },
    {
        "id": "538d8828939b7e26",
        "type": "switch",
        "z": "aef8b42c9606cece",
        "name": "Check for Unlock",
        "property": "payload.event.event_label",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Keypad unlock operation",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 390,
        "y": 800,
        "wires": [
            [
                "b44a5f33bbc33338",
                "cd047b6b7c2d848d"
            ]
        ]
    },
    {
        "id": "b44a5f33bbc33338",
        "type": "switch",
        "z": "aef8b42c9606cece",
        "name": "",
        "property": "payload.event.parameters.userId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "4",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 570,
        "y": 820,
        "wires": [
            [
                "79e05efcad57bde0"
            ],
            [
                "63f9e871890e0294"
            ],
            [
                "27fb270c198215c9"
            ]
        ]
    },
    {
        "id": "ae8e46e8625e8833",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Shout Out",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "notify",
        "service": "alexa_media_everywhere",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{ \"message\": \"Welcome Home Beautiful Lady\", \"data\": {\"type\": \"announce\" ,\"method\": \"all\"}}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 790,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "b4ac09d225fdf04c",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Mark",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_f926b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": \"Emma is home!\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 870,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "63f9e871890e0294",
        "type": "delay",
        "z": "aef8b42c9606cece",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 720,
        "y": 880,
        "wires": [
            [
                "ae8e46e8625e8833",
                "b4ac09d225fdf04c"
            ]
        ]
    },
    {
        "id": "79e05efcad57bde0",
        "type": "delay",
        "z": "aef8b42c9606cece",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 720,
        "y": 800,
        "wires": [
            [
                "1ba2d9b0d459cb41",
                "0a5c82382fc4bef2",
                "1fb837491509d9f8"
            ]
        ]
    },
    {
        "id": "1ba2d9b0d459cb41",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "notify",
        "service": "alexa_media_everywhere",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\":\"Welcome Home Master of all things\",\"data\":{\"type\":\"tts\"}}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 950,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "0a5c82382fc4bef2",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Emma",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_g996b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": \"The Boss is home!\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 890,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "2b601b27d8d1135d",
        "type": "inject",
        "z": "aef8b42c9606cece",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 380,
        "y": 1020,
        "wires": [
            [
                "8fef6dfea506661f"
            ]
        ]
    },
    {
        "id": "1fb837491509d9f8",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Shout Out",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "notify",
        "service": "alexa_media_everywhere",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{ \"message\": \"All kneel, the lord and master is home\", \"data\": {\"type\": \"announce\" ,\"method\": \"all\"}}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 951,
        "y": 865,
        "wires": [
            []
        ]
    },
    {
        "id": "8fef6dfea506661f",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Shout Out",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "notify",
        "service": "alexa_media_everywhere",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{ \"message\": \"Good luck everybody, Abi is home\", \"data\": {\"type\": \"announce\" ,\"method\": \"all\"}}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 770,
        "y": 1180,
        "wires": [
            []
        ]
    },
    {
        "id": "27fb270c198215c9",
        "type": "delay",
        "z": "aef8b42c9606cece",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 600,
        "y": 1100,
        "wires": [
            [
                "8fef6dfea506661f",
                "e773d17f4f296109",
                "f58169cab01b107d"
            ]
        ]
    },
    {
        "id": "f58169cab01b107d",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Mark",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_f926b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": \"Abi is home!\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 770,
        "y": 1140,
        "wires": [
            []
        ]
    },
    {
        "id": "e773d17f4f296109",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Emma",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_g996b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": \"Abi is home!\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 770,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "cd047b6b7c2d848d",
        "type": "debug",
        "z": "aef8b42c9606cece",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 370,
        "y": 940,
        "wires": []
    },
    {
        "id": "70ad278ffa4739d3",
        "type": "server-state-changed",
        "z": "aef8b42c9606cece",
        "name": "Arm Night Mode",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.alarm_night_arm",
        "entityIdType": "exact",
        "outputInitially": true,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 400,
        "wires": [
            [
                "ab5cbff76af5abb2"
            ],
            []
        ]
    },
    {
        "id": "8d79d0ef5cc4ce30",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Arm Night Mode",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "alarm_control_panel",
        "service": "alarm_arm_night",
        "areaId": [],
        "deviceId": [
            "dff11d72eacb6a1bc9fc124a153ab8ce"
        ],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 400,
        "y": 460,
        "wires": [
            [
                "fd315dbdf222f3fe"
            ]
        ]
    },
    {
        "id": "c86a36e4ed726fcb",
        "type": "server-state-changed",
        "z": "aef8b42c9606cece",
        "name": "Smoke Alarm ",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.smokes",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 130,
        "y": 1300,
        "wires": [
            [
                "ca2749c0f29e2a70",
                "edb33b7267ba6fe2",
                "beab0ab995495108",
                "b5f224674c587b8a"
            ],
            []
        ]
    },
    {
        "id": "ca2749c0f29e2a70",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Emma",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_g996b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": \"Smoke Alarm!!!!!\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 390,
        "y": 1240,
        "wires": [
            []
        ]
    },
    {
        "id": "edb33b7267ba6fe2",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Mark",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_f926b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": \"Smoke Alarm!!!!!\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 390,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "beab0ab995495108",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "All Lights",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.all_lights"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 400,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "b5f224674c587b8a",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Shout Out",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "notify",
        "service": "alexa_media_everywhere",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.all_lights"
        ],
        "data": "{ \"message\": \"Get up lazy fire fire fire fire fire\", \"data\": {\"type\": \"announce\" ,\"method\": \"all\"}}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 410,
        "y": 1360,
        "wires": [
            []
        ]
    },
    {
        "id": "231dce31d3b38c68",
        "type": "server-state-changed",
        "z": "aef8b42c9606cece",
        "name": "Alarm Disarmed",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "alarm_control_panel.house_alarm",
        "entityIdType": "exact",
        "outputInitially": true,
        "stateType": "str",
        "ifState": "disarmed",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 100,
        "y": 1620,
        "wires": [
            [
                "e0bbb507571f9faa",
                "1cc40420593eff33"
            ],
            []
        ]
    },
    {
        "id": "176a7669aedfdfbe",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Emma",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_g996b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": \"House Alarm!!!!!\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 570,
        "y": 1680,
        "wires": [
            []
        ]
    },
    {
        "id": "2f1bcd39af558114",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Mark",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_f926b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": \"House Alarm!!!!!\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 570,
        "y": 1740,
        "wires": [
            []
        ]
    },
    {
        "id": "7575720487b93743",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "All Lights",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.all_lights"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 580,
        "y": 1800,
        "wires": [
            []
        ]
    },
    {
        "id": "115ef644ea78ad85",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Emma",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_g996b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": \"Alarm Set\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 570,
        "y": 1480,
        "wires": [
            []
        ]
    },
    {
        "id": "095a3b52b29d24b0",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Mark",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_f926b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": \"Alarm Set\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 570,
        "y": 1520,
        "wires": [
            []
        ]
    },
    {
        "id": "e0bbb507571f9faa",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Mark",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_f926b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": \"Alarm Disarmed\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 570,
        "y": 1620,
        "wires": [
            []
        ]
    },
    {
        "id": "56de6feed65e4ac8",
        "type": "server-state-changed",
        "z": "aef8b42c9606cece",
        "name": "Alarm Armed",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "alarm_control_panel.house_alarm",
        "entityIdType": "exact",
        "outputInitially": true,
        "stateType": "str",
        "ifState": "arming",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 90,
        "y": 1520,
        "wires": [
            [
                "115ef644ea78ad85",
                "095a3b52b29d24b0"
            ],
            []
        ]
    },
    {
        "id": "c170025a451dd77a",
        "type": "server-state-changed",
        "z": "aef8b42c9606cece",
        "name": "Alarm Triggered",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "alarm_control_panel.house_alarm",
        "entityIdType": "exact",
        "outputInitially": true,
        "stateType": "str",
        "ifState": "triggered",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 100,
        "y": 1740,
        "wires": [
            [
                "176a7669aedfdfbe",
                "2f1bcd39af558114",
                "7575720487b93743"
            ],
            []
        ]
    },
    {
        "id": "1cc40420593eff33",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Emma",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_g996b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": \"Alarm Disarmed\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 570,
        "y": 1580,
        "wires": [
            []
        ]
    },
    {
        "id": "fd315dbdf222f3fe",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Reset Input",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.alarm_night_arm"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 410,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "16e4c8d41fcdc61d",
        "type": "api-current-state",
        "z": "aef8b42c9606cece",
        "name": "Occupied",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.notify_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 540,
        "y": 640,
        "wires": [
            [
                "4d5f2207c5a4c78b"
            ],
            []
        ]
    },
    {
        "id": "31b0e9a2a526d8b3",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Set to Home Mode",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "alarm_control_panel",
        "service": "alarm_arm_home",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "alarm_control_panel.house_alarm"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1290,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "4d5f2207c5a4c78b",
        "type": "api-current-state",
        "z": "aef8b42c9606cece",
        "name": "Already Armed",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "armed_night",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "alarm_control_panel.house_alarm",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 760,
        "y": 620,
        "wires": [
            [
                "1197da7ea5948071"
            ],
            []
        ]
    },
    {
        "id": "acd108a5920adc1a",
        "type": "api-current-state",
        "z": "aef8b42c9606cece",
        "name": "John",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "person.john_taylor",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 730,
        "y": 360,
        "wires": [
            [
                "29b8c38789070b51"
            ],
            [
                "dd300f95f07b0063"
            ]
        ]
    },
    {
        "id": "c53a23b01f6e5a70",
        "type": "server-state-changed",
        "z": "aef8b42c9606cece",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "person.john_taylor",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "not_home",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "5",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 270,
        "y": 320,
        "wires": [
            [
                "c47dbda001c4345b"
            ],
            [
                "29b8c38789070b51"
            ]
        ]
    },
    {
        "id": "9c924175780c86f6",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Arm Alarm",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "alarm_control_panel",
        "service": "alarm_arm_away",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "alarm_control_panel.house_alarm"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1110,
        "y": 440,
        "wires": [
            [
                "fda11f931f52d52c"
            ]
        ]
    },
    {
        "id": "90ccf1351925b3f8",
        "type": "link call",
        "z": "aef8b42c9606cece",
        "name": "Check alarm",
        "links": [
            "a35193dd1c8e0862"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 790,
        "y": 440,
        "wires": [
            [
                "9c924175780c86f6"
            ]
        ]
    },
    {
        "id": "1197da7ea5948071",
        "type": "link call",
        "z": "aef8b42c9606cece",
        "name": "Alarm Check",
        "links": [
            "a35193dd1c8e0862"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 990,
        "y": 600,
        "wires": [
            [
                "31b0e9a2a526d8b3"
            ]
        ]
    },
    {
        "id": "ab5cbff76af5abb2",
        "type": "link call",
        "z": "aef8b42c9606cece",
        "name": "Alarm_Check",
        "links": [
            "a35193dd1c8e0862"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 110,
        "y": 500,
        "wires": [
            [
                "8d79d0ef5cc4ce30",
                "0119f39112328358"
            ]
        ]
    },
    {
        "id": "cc1314af9f9aaaf7",
        "type": "inject",
        "z": "aef8b42c9606cece",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 560,
        "wires": [
            [
                "ab5cbff76af5abb2"
            ]
        ]
    },
    {
        "id": "0119f39112328358",
        "type": "debug",
        "z": "aef8b42c9606cece",
        "name": "debug 3",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 380,
        "y": 400,
        "wires": []
    },
    {
        "id": "cd5499b6b414fb5d",
        "type": "ha-button",
        "z": "aef8b42c9606cece",
        "name": "Unlock Door / Unset Alarm",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "91aa65811d949243",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "x": 150,
        "y": 1920,
        "wires": [
            [
                "6184529ee4630805",
                "34c63a90ca047b1f"
            ]
        ]
    },
    {
        "id": "6184529ee4630805",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "Disarm",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "alarm_control_panel",
        "service": "alarm_disarm",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "alarm_control_panel.house_alarm"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 440,
        "y": 1880,
        "wires": [
            []
        ]
    },
    {
        "id": "34c63a90ca047b1f",
        "type": "api-call-service",
        "z": "aef8b42c9606cece",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "lock",
        "service": "unlock",
        "areaId": [],
        "deviceId": [
            "abf3459e4bb36e088aed9c230a8dddea"
        ],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 430,
        "y": 1940,
        "wires": [
            []
        ]
    },
    {
        "id": "dd300f95f07b0063",
        "type": "api-current-state",
        "z": "aef8b42c9606cece",
        "name": "Alarm Away Check",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "armed_away",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "alarm_control_panel.house_alarm",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 970,
        "y": 360,
        "wires": [
            [],
            [
                "90ccf1351925b3f8"
            ]
        ]
    },
    {
        "id": "04fbce9e9fc77844",
        "type": "server-state-changed",
        "z": "22b9ea2795854293",
        "name": "Play Dance",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.demo_nspanel_playlist_dance",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 270,
        "y": 480,
        "wires": [
            [
                "e32d4bf2c5ccdc65"
            ]
        ]
    },
    {
        "id": "e32d4bf2c5ccdc65",
        "type": "api-call-service",
        "z": "22b9ea2795854293",
        "name": "Play Music",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "play_media",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.mark_s_echo_studio"
        ],
        "data": "{\"media_content_id\": \"Dance Music\",   \"media_content_type\": \"AMAZON_MUSIC\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 570,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "fef56c3cd2327771",
        "type": "server-state-changed",
        "z": "22b9ea2795854293",
        "name": "Play / Pause",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.demo_nspanel_music_play_pause",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 270,
        "y": 100,
        "wires": [
            [
                "d70ba9187806c69e"
            ]
        ]
    },
    {
        "id": "d70ba9187806c69e",
        "type": "api-call-service",
        "z": "22b9ea2795854293",
        "name": "Play / Pause",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "media_play_pause",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.mark_s_echo_studio"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 570,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "120b2e404e7719c3",
        "type": "server-state-changed",
        "z": "22b9ea2795854293",
        "name": "Previous",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.demo_nspanel_music_previous",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 260,
        "y": 180,
        "wires": [
            [
                "806f5991b0b8ab94"
            ]
        ]
    },
    {
        "id": "806f5991b0b8ab94",
        "type": "api-call-service",
        "z": "22b9ea2795854293",
        "name": "Play Music Previous",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "media_previous_track",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.mark_s_echo_studio"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 600,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "ffa738cc1cb67f68",
        "type": "server-state-changed",
        "z": "22b9ea2795854293",
        "name": "Next",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.demo_nspanel_music_next",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 250,
        "y": 240,
        "wires": [
            [
                "7ca286ce5819e86f"
            ]
        ]
    },
    {
        "id": "7ca286ce5819e86f",
        "type": "api-call-service",
        "z": "22b9ea2795854293",
        "name": "Next",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "media_next_track",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.mark_s_echo_studio"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 550,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "72bb3bebdf91c6f2",
        "type": "server-state-changed",
        "z": "22b9ea2795854293",
        "name": "Vol Up",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.demo_nspanel_music_volup",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 250,
        "y": 300,
        "wires": [
            [
                "71e88d445e8b31c4"
            ]
        ]
    },
    {
        "id": "71e88d445e8b31c4",
        "type": "api-call-service",
        "z": "22b9ea2795854293",
        "name": "Vol UP",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "volume_up",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.mark_s_echo_studio"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 550,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "d28d986278ea1149",
        "type": "server-state-changed",
        "z": "22b9ea2795854293",
        "name": "Vol Down",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.demo_nspanel_music_voldown",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 260,
        "y": 360,
        "wires": [
            [
                "3b5b201c2e02f11e"
            ]
        ]
    },
    {
        "id": "3b5b201c2e02f11e",
        "type": "api-call-service",
        "z": "22b9ea2795854293",
        "name": "Vol Down",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "volume_down",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.mark_s_echo_studio"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 560,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "e47e82106189e27c",
        "type": "server-state-changed",
        "z": "22b9ea2795854293",
        "name": "Play EveryWhere",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.demo_nspanel_music_cast",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 280,
        "y": 420,
        "wires": [
            [
                "8352bab8c14a2f83"
            ]
        ]
    },
    {
        "id": "8352bab8c14a2f83",
        "type": "api-call-service",
        "z": "22b9ea2795854293",
        "name": "Join",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "join",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.everywhere"
        ],
        "data": "{\"group_members\": \"media_player.everywhere\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 550,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "950341cda4143e22",
        "type": "http request",
        "z": "d7eba63ab5d7339f",
        "name": "bob",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://log.brewfather.net/stream/?id=RiKZbUJF3HamXG",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 570,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "f0f3eeb8c79a013d",
        "type": "poll-state",
        "z": "d7eba63ab5d7339f",
        "d": true,
        "name": "Ferment1 Temp",
        "server": "c525665.4e02f98",
        "version": 3,
        "exposeAsEntityConfig": "",
        "updateInterval": "60",
        "updateIntervalType": "num",
        "updateIntervalUnits": "seconds",
        "outputInitially": false,
        "outputOnChanged": false,
        "entityId": "climate.ferment1",
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputs": 1,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 100,
        "y": 160,
        "wires": [
            [
                "bc81c2a2bf53a16b"
            ]
        ]
    },
    {
        "id": "bc81c2a2bf53a16b",
        "type": "template",
        "z": "d7eba63ab5d7339f",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\"name\":\"Ferment1 Temp\",\"aux_temp\": {{data.attributes.current_temperature}} }",
        "output": "json",
        "x": 360,
        "y": 80,
        "wires": [
            [
                "950341cda4143e22"
            ]
        ]
    },
    {
        "id": "7253ad65d2f646cd",
        "type": "ha-webhook",
        "z": "d7eba63ab5d7339f",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 3,
        "exposeAsEntityConfig": "",
        "outputs": 1,
        "webhookId": "gkhi1aY4eb3Xgqb4ltJfLCedRff0UaR0",
        "method_get": false,
        "method_head": false,
        "method_post": true,
        "method_put": true,
        "outputProperties": [
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            },
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "payloadLocation": false,
        "payloadLocationType": false,
        "headersLocation": false,
        "headersLocationType": false,
        "x": 120,
        "y": 540,
        "wires": [
            [
                "6fbdf5bd936439fd"
            ]
        ]
    },
    {
        "id": "2088062f62e56a59",
        "type": "change",
        "z": "d7eba63ab5d7339f",
        "name": "Battery",
        "rules": [
            {
                "t": "set",
                "p": "payload.battery",
                "pt": "msg",
                "to": "$round(msg.payload.battery, 1)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 540,
        "wires": [
            [
                "7d2149df679e09dc"
            ]
        ]
    },
    {
        "id": "aed0d21f3abf464c",
        "type": "change",
        "z": "d7eba63ab5d7339f",
        "name": "Temp",
        "rules": [
            {
                "t": "set",
                "p": "payload.temp",
                "pt": "msg",
                "to": "$round(msg.payload.temp, 1)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 480,
        "wires": [
            [
                "de28714681df1a40"
            ]
        ]
    },
    {
        "id": "6fbdf5bd936439fd",
        "type": "switch",
        "z": "d7eba63ab5d7339f",
        "name": "",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2BLACK-SG",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1REDSG",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 540,
        "wires": [
            [
                "aed0d21f3abf464c",
                "2088062f62e56a59",
                "f056b64344354161"
            ],
            [
                "bc6b34b002f7cff8",
                "9441ec607902c19b",
                "55312dccd92ad709"
            ]
        ]
    },
    {
        "id": "9441ec607902c19b",
        "type": "change",
        "z": "d7eba63ab5d7339f",
        "name": "Battery",
        "rules": [
            {
                "t": "set",
                "p": "payload.battery",
                "pt": "msg",
                "to": "$round(msg.payload.battery, 1)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 760,
        "wires": [
            [
                "65ec798f26cc3a32"
            ]
        ]
    },
    {
        "id": "bc6b34b002f7cff8",
        "type": "change",
        "z": "d7eba63ab5d7339f",
        "name": "Temp",
        "rules": [
            {
                "t": "set",
                "p": "payload.temp",
                "pt": "msg",
                "to": "$round(msg.payload.temp, 1)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 700,
        "wires": [
            [
                "3e4393287ccc1b78"
            ]
        ]
    },
    {
        "id": "a16d698fbc5f2b44",
        "type": "http request",
        "z": "d7eba63ab5d7339f",
        "name": "bob",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://log.brewfather.net/stream/?id=RiKZbUJF3HamXG",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 570,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "92429a4becfa38a9",
        "type": "poll-state",
        "z": "d7eba63ab5d7339f",
        "d": true,
        "name": "Ferment2 Temp",
        "server": "c525665.4e02f98",
        "version": 3,
        "exposeAsEntityConfig": "",
        "updateInterval": "60",
        "updateIntervalType": "num",
        "updateIntervalUnits": "seconds",
        "outputInitially": false,
        "outputOnChanged": false,
        "entityId": "climate.itc_308_wifi_thermostat_2",
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputs": 1,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 100,
        "y": 260,
        "wires": [
            [
                "5a29f4bbf345fce1"
            ]
        ]
    },
    {
        "id": "5a29f4bbf345fce1",
        "type": "template",
        "z": "d7eba63ab5d7339f",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"name\":\"Ferment2 Temp\",\"aux_temp\": {{data.attributes.current_temperature}}\n    }",
        "output": "json",
        "x": 360,
        "y": 180,
        "wires": [
            [
                "a16d698fbc5f2b44"
            ]
        ]
    },
    {
        "id": "f056b64344354161",
        "type": "ha-sensor",
        "z": "d7eba63ab5d7339f",
        "name": "Black Spindel",
        "entityConfig": "bd2796e43e591a28",
        "version": 0,
        "state": "payload.sg",
        "stateType": "msg",
        "attributes": [],
        "inputOverride": "allow",
        "outputProperties": [],
        "x": 520,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "7d2149df679e09dc",
        "type": "ha-sensor",
        "z": "d7eba63ab5d7339f",
        "name": "Black Spindel Battery",
        "entityConfig": "c85e8c93d3a907fd",
        "version": 0,
        "state": "payload.battery",
        "stateType": "msg",
        "attributes": [],
        "inputOverride": "allow",
        "outputProperties": [],
        "x": 740,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "de28714681df1a40",
        "type": "ha-sensor",
        "z": "d7eba63ab5d7339f",
        "name": "Black Spindel Temp",
        "entityConfig": "bc5ccfc43d0c6de5",
        "version": 0,
        "state": "payload.temp",
        "stateType": "msg",
        "attributes": [],
        "inputOverride": "allow",
        "outputProperties": [],
        "x": 730,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "55312dccd92ad709",
        "type": "ha-sensor",
        "z": "d7eba63ab5d7339f",
        "name": "Red Spindel",
        "entityConfig": "b39f6580f1f052e5",
        "version": 0,
        "state": "payload.sg",
        "stateType": "msg",
        "attributes": [],
        "inputOverride": "allow",
        "outputProperties": [],
        "x": 510,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "65ec798f26cc3a32",
        "type": "ha-sensor",
        "z": "d7eba63ab5d7339f",
        "name": "Red Spindel Battery",
        "entityConfig": "083b5cab9c094664",
        "version": 0,
        "state": "payload.battery",
        "stateType": "msg",
        "attributes": [],
        "inputOverride": "allow",
        "outputProperties": [],
        "x": 740,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "3e4393287ccc1b78",
        "type": "ha-sensor",
        "z": "d7eba63ab5d7339f",
        "name": "Red Spindel Temp",
        "entityConfig": "df7ac1a8dd6e7567",
        "version": 0,
        "state": "payload.temp",
        "stateType": "msg",
        "attributes": [],
        "inputOverride": "allow",
        "outputProperties": [],
        "x": 730,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "1dc0ae5ca3b803a5",
        "type": "server-state-changed",
        "z": "6faab4fb07174dca",
        "name": "Downstairs Toilet",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.ds_toilet_motion_occupancy",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 80,
        "wires": [
            [
                "91cbb39bcacc3201",
                "edc514cad51cb02b"
            ],
            []
        ]
    },
    {
        "id": "91cbb39bcacc3201",
        "type": "api-current-state",
        "z": "6faab4fb07174dca",
        "name": "Light Off?",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.downstairs_toilet",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 380,
        "y": 60,
        "wires": [
            [
                "46894e0f212ceec8"
            ],
            []
        ]
    },
    {
        "id": "46894e0f212ceec8",
        "type": "api-call-service",
        "z": "6faab4fb07174dca",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.downstairs_toilet"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 637,
        "y": 28,
        "wires": [
            []
        ]
    },
    {
        "id": "f6a20531f17f0a04",
        "type": "api-call-service",
        "z": "6faab4fb07174dca",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.downstairs_toilet"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 610,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "1954d59cf765624a",
        "type": "bigtimer",
        "z": "6faab4fb07174dca",
        "outtopic": "control",
        "outpayload1": "on",
        "outpayload2": "off",
        "name": "Dusk ?",
        "comment": "",
        "lat": "51.54018186492846",
        "lon": "-1.7380886676749379",
        "starttime": 5001,
        "endtime": 1425,
        "starttime2": "0",
        "endtime2": "0",
        "startoff": "-0030",
        "endoff": 0,
        "startoff2": "",
        "endoff2": 0,
        "offs": 0,
        "outtext1": "On",
        "outtext2": "Off",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": 0,
        "month7": 0,
        "day8": 0,
        "month8": 0,
        "day9": 0,
        "month9": 0,
        "day10": 0,
        "month10": 0,
        "day11": 0,
        "month11": 0,
        "day12": 0,
        "month12": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": 0,
        "xmonth7": 0,
        "xday8": 0,
        "xmonth8": 0,
        "xday9": 0,
        "xmonth9": 0,
        "xday10": 0,
        "xmonth10": 0,
        "xday11": 0,
        "xmonth11": 0,
        "xday12": 0,
        "xmonth12": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": true,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 100,
        "y": 220,
        "wires": [
            [],
            [],
            [
                "f107bffbc9c02fa9"
            ]
        ]
    },
    {
        "id": "ff21424c921ff4e3",
        "type": "api-current-state",
        "z": "6faab4fb07174dca",
        "name": "Occupied",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.notify_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "date"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 300,
        "y": 280,
        "wires": [
            [
                "f107bffbc9c02fa9"
            ],
            []
        ]
    },
    {
        "id": "f107bffbc9c02fa9",
        "type": "gate",
        "z": "6faab4fb07174dca",
        "name": "Is it evening ?",
        "controlTopic": "control",
        "defaultState": "closed",
        "openCmd": "On",
        "closeCmd": "Off",
        "toggleCmd": "toggle",
        "defaultCmd": "default",
        "statusCmd": "status",
        "persist": false,
        "storeName": "memory",
        "x": 520,
        "y": 260,
        "wires": [
            [
                "5b0812dbec8fe96c",
                "1572c22a92aeeec7"
            ]
        ]
    },
    {
        "id": "28869b1e319ee850",
        "type": "server-state-changed",
        "z": "6faab4fb07174dca",
        "name": "Hall",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.hall",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            }
        ],
        "x": 70,
        "y": 480,
        "wires": [
            [
                "0cf2b5ddb4dbb323"
            ],
            []
        ]
    },
    {
        "id": "5b0812dbec8fe96c",
        "type": "api-current-state",
        "z": "6faab4fb07174dca",
        "name": "Light Off?",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.landing",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 720,
        "y": 260,
        "wires": [
            [
                "cd14aca77f395b73"
            ],
            []
        ]
    },
    {
        "id": "d3b635277b49cdeb",
        "type": "api-call-service",
        "z": "6faab4fb07174dca",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.hall"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1130,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "837c02ca6697d55e",
        "type": "gate",
        "z": "6faab4fb07174dca",
        "name": "Is it evening ?",
        "controlTopic": "control",
        "defaultState": "closed",
        "openCmd": "On",
        "closeCmd": "Off",
        "toggleCmd": "toggle",
        "defaultCmd": "default",
        "statusCmd": "status",
        "persist": false,
        "storeName": "memory",
        "x": 500,
        "y": 440,
        "wires": [
            [
                "dde0364af42d28bd"
            ]
        ]
    },
    {
        "id": "0cf2b5ddb4dbb323",
        "type": "api-current-state",
        "z": "6faab4fb07174dca",
        "name": "Occupied",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.notify_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "date"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 260,
        "y": 460,
        "wires": [
            [
                "837c02ca6697d55e"
            ],
            []
        ]
    },
    {
        "id": "4d81c43e1843919b",
        "type": "bigtimer",
        "z": "6faab4fb07174dca",
        "outtopic": "control",
        "outpayload1": "on",
        "outpayload2": "off",
        "name": "Dusk ?",
        "comment": "",
        "lat": "51.54018186492846",
        "lon": "-1.7380886676749379",
        "starttime": 5001,
        "endtime": "5000",
        "starttime2": "0",
        "endtime2": "0",
        "startoff": "-0030",
        "endoff": 0,
        "startoff2": "",
        "endoff2": 0,
        "offs": 0,
        "outtext1": "On",
        "outtext2": "Off",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": 0,
        "month7": 0,
        "day8": 0,
        "month8": 0,
        "day9": 0,
        "month9": 0,
        "day10": 0,
        "month10": 0,
        "day11": 0,
        "month11": 0,
        "day12": 0,
        "month12": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": 0,
        "xmonth7": 0,
        "xday8": 0,
        "xmonth8": 0,
        "xday9": 0,
        "xmonth9": 0,
        "xday10": 0,
        "xmonth10": 0,
        "xday11": 0,
        "xmonth11": 0,
        "xday12": 0,
        "xmonth12": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": true,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 80,
        "y": 400,
        "wires": [
            [],
            [],
            [
                "837c02ca6697d55e"
            ]
        ]
    },
    {
        "id": "4d9debc3637f87e7",
        "type": "server-state-changed",
        "z": "6faab4fb07174dca",
        "name": "Landing",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.landing_motion_main_occupancy",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            }
        ],
        "x": 90,
        "y": 280,
        "wires": [
            [
                "ff21424c921ff4e3"
            ],
            []
        ]
    },
    {
        "id": "29adb4f01e2676ad",
        "type": "server-state-changed",
        "z": "6faab4fb07174dca",
        "name": "Living Room",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.lounge",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            }
        ],
        "x": 90,
        "y": 780,
        "wires": [
            [
                "802cf9d062448ad1"
            ],
            []
        ]
    },
    {
        "id": "802cf9d062448ad1",
        "type": "api-current-state",
        "z": "6faab4fb07174dca",
        "name": "Occupied",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.notify_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "date"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 280,
        "y": 780,
        "wires": [
            [
                "5c82324a3df8ecd5"
            ],
            []
        ]
    },
    {
        "id": "5c82324a3df8ecd5",
        "type": "gate",
        "z": "6faab4fb07174dca",
        "name": "Is it evening ?",
        "controlTopic": "control",
        "defaultState": "closed",
        "openCmd": "On",
        "closeCmd": "Off",
        "toggleCmd": "toggle",
        "defaultCmd": "default",
        "statusCmd": "status",
        "persist": false,
        "storeName": "memory",
        "x": 520,
        "y": 760,
        "wires": [
            [
                "a4acc5d22f605b19"
            ]
        ]
    },
    {
        "id": "160924a9c8394e15",
        "type": "api-current-state",
        "z": "6faab4fb07174dca",
        "name": "Light Off?",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.living_room",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 900,
        "y": 760,
        "wires": [
            [
                "11042c3f757549f7",
                "a1572cee743dcbf3"
            ],
            []
        ]
    },
    {
        "id": "11042c3f757549f7",
        "type": "api-call-service",
        "z": "6faab4fb07174dca",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.living_room"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1130,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "58f48bd33fa9b8cf",
        "type": "bigtimer",
        "z": "6faab4fb07174dca",
        "outtopic": "control",
        "outpayload1": "on",
        "outpayload2": "off",
        "name": "Dusk ?",
        "comment": "",
        "lat": "51.54018186492846",
        "lon": "-1.7380886676749379",
        "starttime": 5001,
        "endtime": "5000",
        "starttime2": "0",
        "endtime2": "0",
        "startoff": "-0030",
        "endoff": 0,
        "startoff2": "",
        "endoff2": 0,
        "offs": 0,
        "outtext1": "On",
        "outtext2": "Off",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": 0,
        "month7": 0,
        "day8": 0,
        "month8": 0,
        "day9": 0,
        "month9": 0,
        "day10": 0,
        "month10": 0,
        "day11": 0,
        "month11": 0,
        "day12": 0,
        "month12": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": 0,
        "xmonth7": 0,
        "xday8": 0,
        "xmonth8": 0,
        "xday9": 0,
        "xmonth9": 0,
        "xday10": 0,
        "xmonth10": 0,
        "xday11": 0,
        "xmonth11": 0,
        "xday12": 0,
        "xmonth12": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": true,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 440,
        "y": 900,
        "wires": [
            [],
            [],
            [
                "5c82324a3df8ecd5"
            ]
        ]
    },
    {
        "id": "1433055fe287da88",
        "type": "api-call-service",
        "z": "6faab4fb07174dca",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.landing"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1050,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "dde0364af42d28bd",
        "type": "api-current-state",
        "z": "6faab4fb07174dca",
        "name": "Light Off?",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.hall",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 680,
        "y": 440,
        "wires": [
            [
                "8df3f5ddc6edd3e3",
                "78627c9528264c04"
            ],
            []
        ]
    },
    {
        "id": "8df3f5ddc6edd3e3",
        "type": "api-call-service",
        "z": "6faab4fb07174dca",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.hall"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 870,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "6c39ded1a58b4038",
        "type": "server-state-changed",
        "z": "6faab4fb07174dca",
        "name": "Landing",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.landing_motion_main_occupancy",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            }
        ],
        "x": 90,
        "y": 340,
        "wires": [
            [
                "ff21424c921ff4e3"
            ],
            []
        ]
    },
    {
        "id": "f1e6f57bb8c2a090",
        "type": "server-state-changed",
        "z": "6faab4fb07174dca",
        "name": "Kitchen",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.kitchen_motion_occupancy",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            }
        ],
        "x": 90,
        "y": 660,
        "wires": [
            [
                "b38a120de7a65e1c"
            ],
            []
        ]
    },
    {
        "id": "50c9797b61379b88",
        "type": "gate",
        "z": "6faab4fb07174dca",
        "name": "Is it evening ?",
        "controlTopic": "control",
        "defaultState": "closed",
        "openCmd": "On",
        "closeCmd": "Off",
        "toggleCmd": "toggle",
        "defaultCmd": "default",
        "statusCmd": "status",
        "persist": false,
        "storeName": "memory",
        "x": 520,
        "y": 620,
        "wires": [
            [
                "14437ed6bf795d62"
            ]
        ]
    },
    {
        "id": "b38a120de7a65e1c",
        "type": "api-current-state",
        "z": "6faab4fb07174dca",
        "name": "Occupied",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.notify_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "date"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 280,
        "y": 640,
        "wires": [
            [
                "50c9797b61379b88"
            ],
            []
        ]
    },
    {
        "id": "0f53da615034ac05",
        "type": "bigtimer",
        "z": "6faab4fb07174dca",
        "outtopic": "control",
        "outpayload1": "on",
        "outpayload2": "off",
        "name": "Dusk ?",
        "comment": "",
        "lat": "51.54018186492846",
        "lon": "-1.7380886676749379",
        "starttime": 5001,
        "endtime": "5000",
        "starttime2": "0",
        "endtime2": "0",
        "startoff": "-0030",
        "endoff": 0,
        "startoff2": "",
        "endoff2": 0,
        "offs": 0,
        "outtext1": "On",
        "outtext2": "Off",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": 0,
        "month7": 0,
        "day8": 0,
        "month8": 0,
        "day9": 0,
        "month9": 0,
        "day10": 0,
        "month10": 0,
        "day11": 0,
        "month11": 0,
        "day12": 0,
        "month12": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": 0,
        "xmonth7": 0,
        "xday8": 0,
        "xmonth8": 0,
        "xday9": 0,
        "xmonth9": 0,
        "xday10": 0,
        "xmonth10": 0,
        "xday11": 0,
        "xmonth11": 0,
        "xday12": 0,
        "xmonth12": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": true,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 160,
        "y": 580,
        "wires": [
            [],
            [],
            [
                "50c9797b61379b88"
            ]
        ]
    },
    {
        "id": "72c9fdf7557351bc",
        "type": "api-current-state",
        "z": "6faab4fb07174dca",
        "name": "Light Off?",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "switch.kitchen_relay_1",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 900,
        "y": 620,
        "wires": [
            [
                "649ca7d8fcc6e6b5",
                "7129124c2349b4e7"
            ],
            []
        ]
    },
    {
        "id": "f0447cf0e0f74b38",
        "type": "server-state-changed",
        "z": "6faab4fb07174dca",
        "name": "Kitchen_Alarm",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.kitchen",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            }
        ],
        "x": 100,
        "y": 720,
        "wires": [
            [
                "b38a120de7a65e1c"
            ],
            []
        ]
    },
    {
        "id": "c47a3acb985d5a02",
        "type": "server-state-changed",
        "z": "6faab4fb07174dca",
        "name": "Living Room",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.living_room_motion_occupancy",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            }
        ],
        "x": 90,
        "y": 860,
        "wires": [
            [
                "802cf9d062448ad1"
            ],
            []
        ]
    },
    {
        "id": "45dde9cc7a3c1ff2",
        "type": "api-current-state",
        "z": "6faab4fb07174dca",
        "name": "Is someone in room",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "false",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.front_room_presence_presence",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 930,
        "y": 860,
        "wires": [
            [
                "1097d2fac6224771"
            ],
            []
        ]
    },
    {
        "id": "1097d2fac6224771",
        "type": "api-call-service",
        "z": "6faab4fb07174dca",
        "name": "Turn off Lights",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.living_room"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1140,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "b22a4bebe7284866",
        "type": "api-current-state",
        "z": "6faab4fb07174dca",
        "name": "Is someone in room",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "false",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.front_room_presence_presence",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1030,
        "y": 540,
        "wires": [
            [
                "072f831a3408d412"
            ],
            []
        ]
    },
    {
        "id": "072f831a3408d412",
        "type": "api-call-service",
        "z": "6faab4fb07174dca",
        "name": "Turn off Lights",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.kitchen_side"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1240,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "14437ed6bf795d62",
        "type": "api-current-state",
        "z": "6faab4fb07174dca",
        "name": "Alarm_Night",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "armed_night",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "alarm_control_panel.house_alarm",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 730,
        "y": 620,
        "wires": [
            [],
            [
                "72c9fdf7557351bc"
            ]
        ]
    },
    {
        "id": "a4acc5d22f605b19",
        "type": "api-current-state",
        "z": "6faab4fb07174dca",
        "name": "Alarm_Night",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "armed_night",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "alarm_control_panel.house_alarm",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 730,
        "y": 760,
        "wires": [
            [],
            [
                "160924a9c8394e15"
            ]
        ]
    },
    {
        "id": "edc514cad51cb02b",
        "type": "delay",
        "z": "6faab4fb07174dca",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "3",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 320,
        "y": 140,
        "wires": [
            [
                "f6a20531f17f0a04"
            ]
        ]
    },
    {
        "id": "78627c9528264c04",
        "type": "trigger",
        "z": "6faab4fb07174dca",
        "name": "",
        "op1": "0",
        "op2": "1",
        "op1type": "str",
        "op2type": "str",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 570,
        "y": 500,
        "wires": [
            [
                "593ca10722789472"
            ]
        ]
    },
    {
        "id": "649ca7d8fcc6e6b5",
        "type": "trigger",
        "z": "6faab4fb07174dca",
        "name": "",
        "op1": "0",
        "op2": "1",
        "op1type": "str",
        "op2type": "str",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 610,
        "y": 540,
        "wires": [
            [
                "e221d96b8c73e5a6"
            ]
        ]
    },
    {
        "id": "a1572cee743dcbf3",
        "type": "trigger",
        "z": "6faab4fb07174dca",
        "name": "",
        "op1": "0",
        "op2": "1",
        "op1type": "str",
        "op2type": "str",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 590,
        "y": 860,
        "wires": [
            [
                "fc09faf68325b628"
            ]
        ]
    },
    {
        "id": "e221d96b8c73e5a6",
        "type": "switch",
        "z": "6faab4fb07174dca",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 770,
        "y": 540,
        "wires": [
            [
                "b22a4bebe7284866"
            ]
        ]
    },
    {
        "id": "593ca10722789472",
        "type": "switch",
        "z": "6faab4fb07174dca",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 710,
        "y": 500,
        "wires": [
            [
                "52813293d1c0a782"
            ]
        ]
    },
    {
        "id": "fc09faf68325b628",
        "type": "switch",
        "z": "6faab4fb07174dca",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 750,
        "y": 860,
        "wires": [
            [
                "45dde9cc7a3c1ff2"
            ]
        ]
    },
    {
        "id": "1572c22a92aeeec7",
        "type": "trigger",
        "z": "6faab4fb07174dca",
        "name": "",
        "op1": "0",
        "op2": "1",
        "op1type": "str",
        "op2type": "str",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 550,
        "y": 340,
        "wires": [
            [
                "cdd6238ab356344f"
            ]
        ]
    },
    {
        "id": "cdd6238ab356344f",
        "type": "switch",
        "z": "6faab4fb07174dca",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 340,
        "wires": [
            [
                "a405f15d200dd7c0"
            ]
        ]
    },
    {
        "id": "67ab7a1a8554b138",
        "type": "server-state-changed",
        "z": "6faab4fb07174dca",
        "name": "Bathroom",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.bathroom_motion_sensor_occupancy",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            }
        ],
        "x": 80,
        "y": 1060,
        "wires": [
            [
                "5ff0fb97990ad98d"
            ],
            []
        ]
    },
    {
        "id": "cbae16b86e9ff749",
        "type": "api-call-service",
        "z": "6faab4fb07174dca",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.family_bathroom"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1060,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "76bcc2a6a34383f2",
        "type": "gate",
        "z": "6faab4fb07174dca",
        "name": "Is it evening ?",
        "controlTopic": "control",
        "defaultState": "closed",
        "openCmd": "On",
        "closeCmd": "Off",
        "toggleCmd": "toggle",
        "defaultCmd": "default",
        "statusCmd": "status",
        "persist": false,
        "storeName": "memory",
        "x": 480,
        "y": 980,
        "wires": [
            [
                "766575d6732c296e"
            ]
        ]
    },
    {
        "id": "5ff0fb97990ad98d",
        "type": "api-current-state",
        "z": "6faab4fb07174dca",
        "name": "Occupied",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.notify_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "date"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 260,
        "y": 1040,
        "wires": [
            [
                "76bcc2a6a34383f2"
            ],
            []
        ]
    },
    {
        "id": "554556c67b63847a",
        "type": "bigtimer",
        "z": "6faab4fb07174dca",
        "outtopic": "control",
        "outpayload1": "on",
        "outpayload2": "off",
        "name": "Dusk ?",
        "comment": "",
        "lat": "51.54018186492846",
        "lon": "-1.7380886676749379",
        "starttime": 5001,
        "endtime": "5000",
        "starttime2": "0",
        "endtime2": "0",
        "startoff": "-0030",
        "endoff": 0,
        "startoff2": "",
        "endoff2": 0,
        "offs": 0,
        "outtext1": "On",
        "outtext2": "Off",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": 0,
        "month7": 0,
        "day8": 0,
        "month8": 0,
        "day9": 0,
        "month9": 0,
        "day10": 0,
        "month10": 0,
        "day11": 0,
        "month11": 0,
        "day12": 0,
        "month12": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": 0,
        "xmonth7": 0,
        "xday8": 0,
        "xmonth8": 0,
        "xday9": 0,
        "xmonth9": 0,
        "xday10": 0,
        "xmonth10": 0,
        "xday11": 0,
        "xmonth11": 0,
        "xday12": 0,
        "xmonth12": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": true,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 80,
        "y": 980,
        "wires": [
            [],
            [],
            [
                "76bcc2a6a34383f2"
            ]
        ]
    },
    {
        "id": "766575d6732c296e",
        "type": "api-current-state",
        "z": "6faab4fb07174dca",
        "name": "Light Off?",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "switch.family_bathroom",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 680,
        "y": 1020,
        "wires": [
            [
                "7fc16720b13ca12d",
                "36903b27a4f15351"
            ],
            []
        ]
    },
    {
        "id": "7fc16720b13ca12d",
        "type": "api-call-service",
        "z": "6faab4fb07174dca",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.family_bathroom"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 880,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "87c3750be66503da",
        "type": "trigger",
        "z": "6faab4fb07174dca",
        "name": "",
        "op1": "0",
        "op2": "1",
        "op1type": "str",
        "op2type": "str",
        "duration": "10",
        "extend": true,
        "overrideDelay": false,
        "units": "min",
        "reset": "stop",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 710,
        "y": 1080,
        "wires": [
            [
                "fb3dba55013e9f9b"
            ]
        ]
    },
    {
        "id": "fb3dba55013e9f9b",
        "type": "switch",
        "z": "6faab4fb07174dca",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 890,
        "y": 1080,
        "wires": [
            [
                "cbae16b86e9ff749"
            ]
        ]
    },
    {
        "id": "9d46de513a548a4e",
        "type": "server-state-changed",
        "z": "6faab4fb07174dca",
        "name": "Bathroom Light",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "switch.family_bathroom",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 100,
        "y": 1120,
        "wires": [
            [
                "36903b27a4f15351"
            ],
            []
        ]
    },
    {
        "id": "36903b27a4f15351",
        "type": "gate",
        "z": "6faab4fb07174dca",
        "name": "Bathtime",
        "controlTopic": "control",
        "defaultState": "open",
        "openCmd": "open",
        "closeCmd": "close",
        "toggleCmd": "toggle",
        "defaultCmd": "default",
        "statusCmd": "status",
        "persist": false,
        "storeName": "memory",
        "x": 480,
        "y": 1080,
        "wires": [
            [
                "87c3750be66503da"
            ]
        ]
    },
    {
        "id": "dc914b4a95a526d5",
        "type": "server-state-changed",
        "z": "6faab4fb07174dca",
        "name": "Alexa Bathtime",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.bathtime",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "control",
                "valueType": "str"
            }
        ],
        "x": 120,
        "y": 1200,
        "wires": [
            [
                "db3651712688361d"
            ],
            [
                "db3651712688361d"
            ]
        ]
    },
    {
        "id": "db3651712688361d",
        "type": "change",
        "z": "6faab4fb07174dca",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "control",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "on",
                "fromt": "str",
                "to": "close",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "off",
                "fromt": "str",
                "to": "open",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 1180,
        "wires": [
            [
                "36903b27a4f15351",
                "dfa4948cb5008ab6"
            ]
        ]
    },
    {
        "id": "dfa4948cb5008ab6",
        "type": "change",
        "z": "6faab4fb07174dca",
        "name": "reset",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "close",
                "fromt": "str",
                "to": "stop",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 1180,
        "wires": [
            [
                "87c3750be66503da"
            ]
        ]
    },
    {
        "id": "cd14aca77f395b73",
        "type": "api-call-service",
        "z": "6faab4fb07174dca",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.landing"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 930,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "a405f15d200dd7c0",
        "type": "gate",
        "z": "6faab4fb07174dca",
        "name": "",
        "controlTopic": "control",
        "defaultState": "open",
        "openCmd": "open",
        "closeCmd": "close",
        "toggleCmd": "toggle",
        "defaultCmd": "default",
        "statusCmd": "status",
        "persist": false,
        "storeName": "memory",
        "x": 870,
        "y": 340,
        "wires": [
            [
                "1433055fe287da88"
            ]
        ]
    },
    {
        "id": "52813293d1c0a782",
        "type": "gate",
        "z": "6faab4fb07174dca",
        "name": "",
        "controlTopic": "control",
        "defaultState": "open",
        "openCmd": "open",
        "closeCmd": "close",
        "toggleCmd": "toggle",
        "defaultCmd": "default",
        "statusCmd": "status",
        "persist": false,
        "storeName": "memory",
        "x": 890,
        "y": 480,
        "wires": [
            [
                "d3b635277b49cdeb"
            ]
        ]
    },
    {
        "id": "64e4ae9513bdbeb6",
        "type": "server-state-changed",
        "z": "6faab4fb07174dca",
        "name": "Alexa Stop Motion",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.motion",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "control",
                "valueType": "str"
            }
        ],
        "x": 950,
        "y": 120,
        "wires": [
            [
                "013b7dcf4ef6c1ec"
            ],
            [
                "013b7dcf4ef6c1ec"
            ]
        ]
    },
    {
        "id": "013b7dcf4ef6c1ec",
        "type": "change",
        "z": "6faab4fb07174dca",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "control",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "off",
                "fromt": "str",
                "to": "close",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "on",
                "fromt": "str",
                "to": "open",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1100,
        "y": 200,
        "wires": [
            [
                "a405f15d200dd7c0",
                "52813293d1c0a782"
            ]
        ]
    },
    {
        "id": "7129124c2349b4e7",
        "type": "api-call-service",
        "z": "6faab4fb07174dca",
        "name": "",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.kitchen_island",
            "switch.kitchen_side"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1120,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "124fa38204b71b4c",
        "type": "api-current-state",
        "z": "ba3a0a20bc4bf87e",
        "name": "cons back door closed",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.conser_rear_cont",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "Consveratory Rear door open",
                "valueType": "str"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 420,
        "y": 320,
        "wires": [
            [
                "67f4e8600c0b919a"
            ],
            [
                "61c5a21b5e198cf7",
                "f4e2055c4d3d3ff6"
            ]
        ]
    },
    {
        "id": "9e44e791d4582161",
        "type": "api-current-state",
        "z": "ba3a0a20bc4bf87e",
        "name": "front door closed",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.front_door",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "Front Door Open",
                "valueType": "str"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 410,
        "y": 260,
        "wires": [
            [
                "124fa38204b71b4c"
            ],
            [
                "61c5a21b5e198cf7",
                "f4e2055c4d3d3ff6"
            ]
        ]
    },
    {
        "id": "67f4e8600c0b919a",
        "type": "api-current-state",
        "z": "ba3a0a20bc4bf87e",
        "name": "cons side door close",
        "server": "c525665.4e02f98",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.conser_side_cont",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "Back door Open !",
                "valueType": "str"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 420,
        "y": 380,
        "wires": [
            [
                "25162fa569d3e631"
            ],
            [
                "61c5a21b5e198cf7",
                "f4e2055c4d3d3ff6"
            ]
        ]
    },
    {
        "id": "61c5a21b5e198cf7",
        "type": "api-call-service",
        "z": "ba3a0a20bc4bf87e",
        "name": "Mark",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_f926b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": {{payload}}}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 910,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "f4e2055c4d3d3ff6",
        "type": "api-call-service",
        "z": "ba3a0a20bc4bf87e",
        "name": "Emma",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_g996b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": {{payload}}}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 910,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "25162fa569d3e631",
        "type": "link out",
        "z": "ba3a0a20bc4bf87e",
        "name": "Return_to_sender",
        "mode": "return",
        "links": [],
        "x": 665,
        "y": 100,
        "wires": []
    },
    {
        "id": "a35193dd1c8e0862",
        "type": "link in",
        "z": "ba3a0a20bc4bf87e",
        "name": "Alarm Check",
        "links": [
            "070e3c676a419a46"
        ],
        "x": 85,
        "y": 180,
        "wires": [
            [
                "9e44e791d4582161"
            ]
        ]
    },
    {
        "id": "84394a1814f7f4d8",
        "type": "server-state-changed",
        "z": "95da5cf0ee83e6bc",
        "name": "Heat 66",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.heat_66",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "66",
                "valueType": "str"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 70,
        "y": 160,
        "wires": [
            [
                "77429ef44c50f356",
                "aaff5b53a46980fe"
            ]
        ]
    },
    {
        "id": "aaff5b53a46980fe",
        "type": "debug",
        "z": "95da5cf0ee83e6bc",
        "name": "debug 4",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 880,
        "y": 120,
        "wires": []
    },
    {
        "id": "87002253bbc0040b",
        "type": "server-state-changed",
        "z": "95da5cf0ee83e6bc",
        "name": "Heat 99",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.heat_99",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 70,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "5060f71c2d40aae4",
        "type": "server-state-changed",
        "z": "95da5cf0ee83e6bc",
        "name": "Heat 80",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.heat_80",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 70,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "da5624b5785cebcf",
        "type": "server-state-changed",
        "z": "95da5cf0ee83e6bc",
        "name": "Heat 72",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.heat_72",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 70,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "1aa3d905591d6f19",
        "type": "server-state-changed",
        "z": "95da5cf0ee83e6bc",
        "name": "Heat Off",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.heater_switch",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "0",
                "valueType": "str"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 80,
        "y": 400,
        "wires": [
            [
                "77429ef44c50f356"
            ]
        ]
    },
    {
        "id": "77429ef44c50f356",
        "type": "api-call-service",
        "z": "95da5cf0ee83e6bc",
        "name": "Brewery Heater",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "",
        "service": "",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "sensor.boil_kettle_current_temperature"
        ],
        "data": "{\"target_temperature\" : {{payload}}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 380,
        "y": 280,
        "wires": [
            [
                "aaff5b53a46980fe"
            ]
        ]
    },
    {
        "id": "d925edb8b528d2ce",
        "type": "server-state-changed",
        "z": "95da5cf0ee83e6bc",
        "name": "Boil Kettle Temp",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "climate.boil_kettle_temp_sensor",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "99",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 100,
        "y": 540,
        "wires": [
            [
                "430a384ac5f2ddc4",
                "949cc94da713ce05"
            ],
            []
        ]
    },
    {
        "id": "430a384ac5f2ddc4",
        "type": "api-call-service",
        "z": "95da5cf0ee83e6bc",
        "name": "Mark",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_f926b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": \"Boil Reached\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 350,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "949cc94da713ce05",
        "type": "stoptimer",
        "z": "95da5cf0ee83e6bc",
        "duration": "35",
        "units": "Minute",
        "payloadtype": "num",
        "payloadval": "0",
        "name": "",
        "x": 320,
        "y": 580,
        "wires": [
            [
                "d34bb87ad877e128"
            ],
            []
        ]
    },
    {
        "id": "d34bb87ad877e128",
        "type": "api-call-service",
        "z": "95da5cf0ee83e6bc",
        "name": "Mark",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_sm_f926b",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\": \"35 Min Hop Timer\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 530,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "c9ed5c7d57045ce0",
        "type": "server-state-changed",
        "z": "b8077327de2a9cf8",
        "name": "Front_Door",
        "server": "c525665.4e02f98",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "sensor.frontdoor_person",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 100,
        "y": 140,
        "wires": [
            [
                "11a075302623ebe7",
                "7958e09cf22725f9"
            ],
            []
        ]
    },
    {
        "id": "11a075302623ebe7",
        "type": "api-call-service",
        "z": "b8077327de2a9cf8",
        "name": "Front_Door_Card_For_Tablet",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "browser_mod",
        "service": "more_info",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"entity\": \"camera.frontdoor_2\",\t   \"large\" : \"true\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 480,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "7c37e2aa621812a8",
        "type": "api-call-service",
        "z": "b8077327de2a9cf8",
        "name": "Front_Door_Card_For_Tablet",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": true,
        "domain": "browser_mod",
        "service": "close_popup",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"entity\": \"camera.frontdoor_2\",\t   \"large\" : \"true\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 680,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "7958e09cf22725f9",
        "type": "delay",
        "z": "b8077327de2a9cf8",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 400,
        "y": 100,
        "wires": [
            [
                "7c37e2aa621812a8"
            ]
        ]
    },
    {
        "id": "7c375f1518b62443",
        "type": "link in",
        "z": "b8077327de2a9cf8",
        "g": "6f6977cb11a855a9",
        "name": "link in 1",
        "links": [
            "070e3c676a419a46"
        ],
        "x": 135,
        "y": 400,
        "wires": [
            [
                "b647f2ab316a51a9",
                "be8fbee24b9fa8da",
                "65be187ce008b99e"
            ]
        ]
    },
    {
        "id": "b647f2ab316a51a9",
        "type": "api-call-service",
        "z": "b8077327de2a9cf8",
        "g": "6f6977cb11a855a9",
        "name": "Hallway",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "ffmpeg",
        "service": "stop",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.hallway_recordings",
            "switch.hallway_snapshots"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 320,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "be8fbee24b9fa8da",
        "type": "api-call-service",
        "z": "b8077327de2a9cf8",
        "g": "6f6977cb11a855a9",
        "name": "Landing",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "",
        "service": "",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 320,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "65be187ce008b99e",
        "type": "api-call-service",
        "z": "b8077327de2a9cf8",
        "g": "6f6977cb11a855a9",
        "name": "Back Door",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "",
        "service": "",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 330,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "ed68fb2415b63493",
        "type": "link in",
        "z": "b8077327de2a9cf8",
        "g": "b19edb919607bea2",
        "name": "link in 2",
        "links": [
            "52d0fdcf395955f0"
        ],
        "x": 135,
        "y": 620,
        "wires": [
            [
                "f137043fcd5e89d7",
                "984df9fd71a643e8",
                "fb65caac52969d15"
            ]
        ]
    },
    {
        "id": "f137043fcd5e89d7",
        "type": "api-call-service",
        "z": "b8077327de2a9cf8",
        "g": "b19edb919607bea2",
        "name": "Hallway",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.driveway_detect",
            "switch.driveway_recordings",
            "switch.driveway_snapshots"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 320,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "984df9fd71a643e8",
        "type": "api-call-service",
        "z": "b8077327de2a9cf8",
        "g": "b19edb919607bea2",
        "name": "Landing",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "",
        "service": "",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 320,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "fb65caac52969d15",
        "type": "api-call-service",
        "z": "b8077327de2a9cf8",
        "g": "b19edb919607bea2",
        "name": "Back Door",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "",
        "service": "",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 330,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "8234726a0a8aeb8b",
        "type": "presence-faker",
        "z": "637a48558253d277",
        "name": "Living Room",
        "onPayload": "turn_on",
        "onPayloadType": "str",
        "onTopic": "light.living_room",
        "offPayload": "turn_off",
        "offPayloadType": "str",
        "offTopic": "light.living_room",
        "windowBegin": "17:00",
        "windowEnd": "22:30",
        "minDurationHours": "1",
        "minDurationMinutes": "15",
        "minDurationSeconds": 0,
        "minDuration": "4500",
        "maxDurationHours": "1",
        "maxDurationMinutes": "50",
        "maxDurationSeconds": 0,
        "maxDuration": "6600",
        "minCount": 1,
        "maxCount": 1,
        "startupBehavior": "onMsg",
        "actionOnDisable": "off",
        "firstBlockType": "off",
        "lastBlockType": "off",
        "isLoggingEnabled": false,
        "x": 770,
        "y": 260,
        "wires": [
            [
                "89e3fe975fc80b3e"
            ]
        ]
    },
    {
        "id": "89e3fe975fc80b3e",
        "type": "api-call-service",
        "z": "637a48558253d277",
        "name": "Call Service",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "homeassistant",
        "service": "{{payload}}",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "{{topic}}"
        ],
        "data": "{}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 990,
        "y": 320,
        "wires": [
            [
                "a12d91f72337d7d3"
            ]
        ]
    },
    {
        "id": "e275f646cae085ee",
        "type": "presence-faker",
        "z": "637a48558253d277",
        "name": "Landing",
        "onPayload": "turn_on",
        "onPayloadType": "str",
        "onTopic": "light.landing",
        "offPayload": "turn_off",
        "offPayloadType": "str",
        "offTopic": "light.landing",
        "windowBegin": "17:00",
        "windowEnd": "22:30",
        "minDurationHours": "1",
        "minDurationMinutes": "45",
        "minDurationSeconds": 0,
        "minDuration": "6300",
        "maxDurationHours": "2",
        "maxDurationMinutes": "10",
        "maxDurationSeconds": 0,
        "maxDuration": "7800",
        "minCount": 1,
        "maxCount": 1,
        "startupBehavior": "onMsg",
        "actionOnDisable": "off",
        "firstBlockType": "off",
        "lastBlockType": "off",
        "isLoggingEnabled": false,
        "x": 760,
        "y": 320,
        "wires": [
            [
                "89e3fe975fc80b3e"
            ]
        ]
    },
    {
        "id": "a67f71989a8adc2a",
        "type": "presence-faker",
        "z": "637a48558253d277",
        "name": "Hallway",
        "onPayload": "turn_on",
        "onPayloadType": "str",
        "onTopic": "light.hallway",
        "offPayload": "turn_off",
        "offPayloadType": "str",
        "offTopic": "light.hallway",
        "windowBegin": "18:30",
        "windowEnd": "22:30",
        "minDurationHours": "1",
        "minDurationMinutes": "30",
        "minDurationSeconds": 0,
        "minDuration": "5400",
        "maxDurationHours": "1",
        "maxDurationMinutes": "50",
        "maxDurationSeconds": 0,
        "maxDuration": "6600",
        "minCount": 1,
        "maxCount": 1,
        "startupBehavior": "onMsg",
        "actionOnDisable": "off",
        "firstBlockType": "off",
        "lastBlockType": "off",
        "isLoggingEnabled": false,
        "x": 760,
        "y": 380,
        "wires": [
            [
                "89e3fe975fc80b3e"
            ]
        ]
    },
    {
        "id": "d2acfb9f.e06f98",
        "type": "function",
        "z": "637a48558253d277",
        "name": "PF config - Living Room",
        "func": "if (msg.topic != 'suncron:schedule') {\n    return\n}\n\nconst windowBeginEvent = 'sunset'\nconst windowBegin = msg.payload[windowBeginEvent].cronTime.substring(11)\n\nconst windowEnd = \"19:45\"\n\nreturn {\n    payload: {\n      windowBegin,\n      windowEnd\n    }\n}\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 420,
        "wires": [
            [
                "8234726a0a8aeb8b"
            ]
        ]
    },
    {
        "id": "d218ef23e2f78e13",
        "type": "function",
        "z": "637a48558253d277",
        "name": "PF config - Landing",
        "func": "if (msg.topic != 'suncron:schedule') {\n    return\n}\n\nconst windowBeginEvent = 'sunset'\nconst windowBegin = msg.payload[windowBeginEvent].cronTime.substring(11)\n\nconst windowEnd = \"20:45\"\n\nreturn {\n    payload: {\n      windowBegin,\n      windowEnd\n    }\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 460,
        "wires": [
            [
                "e275f646cae085ee"
            ]
        ]
    },
    {
        "id": "48ed18acc78c230d",
        "type": "function",
        "z": "637a48558253d277",
        "name": "PF config - Hallway",
        "func": "if (msg.topic != 'suncron:schedule') {\n    return\n}\n\nconst windowBeginEvent = 'sunset'\nconst windowBegin = msg.payload[windowBeginEvent].cronTime.substring(11)\n\nconst windowEnd = \"20:45\"\n\nreturn {\n    payload: {\n      windowBegin,\n      windowEnd\n    }\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 500,
        "wires": [
            [
                "a67f71989a8adc2a"
            ]
        ]
    },
    {
        "id": "f70ac3fdc2fb0906",
        "type": "link in",
        "z": "637a48558253d277",
        "name": "",
        "links": [
            "b47fd13aca9a9d36",
            "52d0fdcf395955f0"
        ],
        "x": 125,
        "y": 260,
        "wires": [
            [
                "8234726a0a8aeb8b",
                "e275f646cae085ee",
                "a67f71989a8adc2a",
                "5f8d5646.1c9208"
            ]
        ]
    },
    {
        "id": "5f8d5646.1c9208",
        "type": "suncron",
        "z": "637a48558253d277",
        "name": "",
        "lat": "51.54018186492846",
        "lon": "-1.7380886676749379",
        "replay": false,
        "ejectScheduleOnUpdate": true,
        "sunrisePayload": "sunrise",
        "sunrisePayloadType": "str",
        "sunriseTopic": "",
        "sunriseOffsetType": 1,
        "sunriseOffsetHours": 0,
        "sunriseOffsetMinutes": 0,
        "sunriseOffset": 0,
        "sunriseEndPayload": "",
        "sunriseEndPayloadType": "str",
        "sunriseEndTopic": "",
        "sunriseEndOffsetType": 1,
        "sunriseEndOffsetHours": 0,
        "sunriseEndOffsetMinutes": 0,
        "sunriseEndOffset": 0,
        "goldenHourEndPayload": "",
        "goldenHourEndPayloadType": "str",
        "goldenHourEndTopic": "",
        "goldenHourEndOffsetType": 1,
        "goldenHourEndOffsetHours": 0,
        "goldenHourEndOffsetMinutes": 0,
        "goldenHourEndOffset": 0,
        "solarNoonPayload": "",
        "solarNoonPayloadType": "str",
        "solarNoonTopic": "",
        "solarNoonOffsetType": 1,
        "solarNoonOffsetHours": 0,
        "solarNoonOffsetMinutes": 0,
        "solarNoonOffset": 0,
        "goldenHourPayload": "",
        "goldenHourPayloadType": "str",
        "goldenHourTopic": "",
        "goldenHourOffsetType": 1,
        "goldenHourOffsetHours": 0,
        "goldenHourOffsetMinutes": 0,
        "goldenHourOffset": 0,
        "sunsetStartPayload": "",
        "sunsetStartPayloadType": "str",
        "sunsetStartTopic": "",
        "sunsetStartOffsetType": 1,
        "sunsetStartOffsetHours": 0,
        "sunsetStartOffsetMinutes": 0,
        "sunsetStartOffset": 0,
        "sunsetPayload": "sunset",
        "sunsetPayloadType": "str",
        "sunsetTopic": "",
        "sunsetOffsetType": 1,
        "sunsetOffsetHours": 0,
        "sunsetOffsetMinutes": 0,
        "sunsetOffset": 0,
        "duskPayload": "",
        "duskPayloadType": "str",
        "duskTopic": "",
        "duskOffsetType": 1,
        "duskOffsetHours": 0,
        "duskOffsetMinutes": 0,
        "duskOffset": 0,
        "nauticalDuskPayload": "",
        "nauticalDuskPayloadType": "str",
        "nauticalDuskTopic": "",
        "nauticalDuskOffsetType": 1,
        "nauticalDuskOffsetHours": 0,
        "nauticalDuskOffsetMinutes": 0,
        "nauticalDuskOffset": 0,
        "nightPayload": "",
        "nightPayloadType": "str",
        "nightTopic": "",
        "nightOffsetType": 1,
        "nightOffsetHours": 0,
        "nightOffsetMinutes": 0,
        "nightOffset": 0,
        "nadirPayload": "",
        "nadirPayloadType": "str",
        "nadirTopic": "",
        "nadirOffsetType": 1,
        "nadirOffsetHours": 0,
        "nadirOffsetMinutes": 0,
        "nadirOffset": 0,
        "nightEndPayload": "",
        "nightEndPayloadType": "str",
        "nightEndTopic": "",
        "nightEndOffsetType": 1,
        "nightEndOffsetHours": 0,
        "nightEndOffsetMinutes": 0,
        "nightEndOffset": 0,
        "nauticalDawnPayload": "",
        "nauticalDawnPayloadType": "str",
        "nauticalDawnTopic": "",
        "nauticalDawnOffsetType": 1,
        "nauticalDawnOffsetHours": 0,
        "nauticalDawnOffsetMinutes": 0,
        "nauticalDawnOffset": 0,
        "dawnPayload": "",
        "dawnPayloadType": "str",
        "dawnTopic": "",
        "dawnOffsetType": 1,
        "dawnOffsetHours": 0,
        "dawnOffsetMinutes": 0,
        "dawnOffset": 0,
        "x": 260,
        "y": 420,
        "wires": [
            [
                "d2acfb9f.e06f98",
                "d218ef23e2f78e13",
                "48ed18acc78c230d"
            ]
        ]
    },
    {
        "id": "a12d91f72337d7d3",
        "type": "debug",
        "z": "637a48558253d277",
        "name": "debug 5",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 760,
        "y": 600,
        "wires": []
    },
    {
        "id": "08a4259b5f0f5cec",
        "type": "poll-state",
        "z": "3698277d79b90b3b",
        "name": "Check Tablet Battery",
        "server": "c525665.4e02f98",
        "version": 3,
        "exposeAsEntityConfig": "",
        "updateInterval": "5",
        "updateIntervalType": "num",
        "updateIntervalUnits": "minutes",
        "outputInitially": true,
        "outputOnChanged": false,
        "entityId": "sensor.u9_battery",
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputs": 1,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 130,
        "y": 120,
        "wires": [
            [
                "153855f704aaf237"
            ]
        ]
    },
    {
        "id": "153855f704aaf237",
        "type": "switch",
        "z": "3698277d79b90b3b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lte",
                "v": "20",
                "vt": "num"
            },
            {
                "t": "gte",
                "v": "80",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 120,
        "wires": [
            [
                "b6fc2cf63bdd1e75"
            ],
            [
                "f2f89319e8048a2a"
            ]
        ]
    },
    {
        "id": "b6fc2cf63bdd1e75",
        "type": "api-call-service",
        "z": "3698277d79b90b3b",
        "name": "Turn on Charger",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [
            "742b6787503004e856b0837cb1aeefbe"
        ],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 560,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "f2f89319e8048a2a",
        "type": "api-call-service",
        "z": "3698277d79b90b3b",
        "name": "Turn off Charger",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [
            "742b6787503004e856b0837cb1aeefbe"
        ],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 560,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "9564001a8dcb87d7",
        "type": "bigtimer",
        "z": "3698277d79b90b3b",
        "outtopic": "",
        "outpayload1": "turn_on",
        "outpayload2": "turn_off",
        "name": "Big Timer",
        "comment": "",
        "lat": 0,
        "lon": 0,
        "starttime": "420",
        "endtime": "0",
        "starttime2": 0,
        "endtime2": 0,
        "startoff": 0,
        "endoff": 0,
        "startoff2": 0,
        "endoff2": 0,
        "offs": 0,
        "outtext1": "",
        "outtext2": "",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": 0,
        "month7": 0,
        "day8": 0,
        "month8": 0,
        "day9": 0,
        "month9": 0,
        "day10": 0,
        "month10": 0,
        "day11": 0,
        "month11": 0,
        "day12": 0,
        "month12": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": 0,
        "xmonth7": 0,
        "xday8": 0,
        "xmonth8": 0,
        "xday9": 0,
        "xmonth9": 0,
        "xday10": 0,
        "xmonth10": 0,
        "xday11": 0,
        "xmonth11": 0,
        "xday12": 0,
        "xmonth12": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": true,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 100,
        "y": 280,
        "wires": [
            [
                "dd26feb64eb2cc04"
            ],
            [],
            []
        ]
    },
    {
        "id": "dd26feb64eb2cc04",
        "type": "api-call-service",
        "z": "3698277d79b90b3b",
        "name": "Turn on/Off Screen on Tablet",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "{{payload}}",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.u9_screen"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 400,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "db6ebccc4bb88b8d",
        "type": "http request",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Octopus Export",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "https://api.octopus.energy/v1/products/AGILE-OUTGOING-19-05-13/electricity-tariffs/E-1R-AGILE-OUTGOING-19-05-13-H/standard-unit-rates/?page_size=96",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 300,
        "y": 120,
        "wires": [
            [
                "65094b21c3938d73"
            ]
        ]
    },
    {
        "id": "63bba87f93e0eaae",
        "type": "http request",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Octopus Import",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "https://api.octopus.energy/v1/products/AGILE-22-08-31/electricity-tariffs/E-1R-AGILE-22-08-31-H/standard-unit-rates/?page_size=96",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 300,
        "y": 80,
        "wires": [
            [
                "22fdc0bfd7bdd329"
            ]
        ]
    },
    {
        "id": "65094b21c3938d73",
        "type": "change",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Results",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.results",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "export",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 120,
        "wires": [
            [
                "3c0e6412766b7286"
            ]
        ]
    },
    {
        "id": "22fdc0bfd7bdd329",
        "type": "change",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Results",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.results",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "import",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 80,
        "wires": [
            [
                "3c0e6412766b7286"
            ]
        ]
    },
    {
        "id": "3c0e6412766b7286",
        "type": "join",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Combine",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "num",
        "reduceFixup": "",
        "x": 620,
        "y": 80,
        "wires": [
            [
                "416e22ecfcbf5616"
            ]
        ]
    },
    {
        "id": "0ba1d9b378092267",
        "type": "inject",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "@ 16:05",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "05 16 * * *",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 80,
        "wires": [
            [
                "db6ebccc4bb88b8d",
                "63bba87f93e0eaae"
            ]
        ]
    },
    {
        "id": "416e22ecfcbf5616",
        "type": "change",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Build & Save Tariff Array",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.import#$i.{\t   \"from\": valid_from,\t   \"upto\": valid_to,\t   \"date\": $substring(valid_from,0,10),\t   \"timefrom\": $substring(valid_from,11,5),\t   \"timeupto\": $substring(valid_to,11,5),\t   \"import\": value_inc_vat,\t   \"export\": %.export[$i].value_inc_vat\t}^(from)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "OctAgileTariff",
                "pt": "flow",
                "to": "payload",
                "tot": "msg",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 80,
        "wires": [
            [
                "56dd710454ea2e25"
            ]
        ]
    },
    {
        "id": "ce579e86db6fcc9b",
        "type": "comment",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Octopus agile prices (2 days) JSONata V2.0.0",
        "info": "",
        "x": 210,
        "y": 40,
        "wires": []
    },
    {
        "id": "be04e63b7258b035",
        "type": "ha-sensor",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Octopus Agile Prices",
        "entityConfig": "893ae24be6da2123",
        "version": 0,
        "state": "agile.now.from",
        "stateType": "msg",
        "attributes": [
            {
                "property": "array",
                "value": "payload",
                "valueType": "msg"
            },
            {
                "property": "import",
                "value": "agile.now.import",
                "valueType": "msg"
            },
            {
                "property": "export",
                "value": "agile.now.export",
                "valueType": "msg"
            },
            {
                "property": "import_next",
                "value": "agile.next.import",
                "valueType": "msg"
            },
            {
                "property": "export_next",
                "value": "agile.next.export",
                "valueType": "msg"
            }
        ],
        "inputOverride": "allow",
        "outputProperties": [],
        "x": 840,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "4430da6cfe290e39",
        "type": "change",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Value Now",
        "rules": [
            {
                "t": "set",
                "p": "agile",
                "pt": "msg",
                "to": "(\t   /* function to add <delta> minutes to now */\t   $tstep:=function($mdelta) {\t       $fromMillis($toMillis($now())+$mdelta*60000)\t   };\t\t   /* function to build key value from timestamp                         */\t   /* strip fraction of seconds, floor minutes to 00 or 30, zero seconds */\t   $keyis:=function($ts) {\t       (\t           $t:=$replace($ts, /(\\.[0-9]+)/, '');\t           $m:=$substring($t,-6,2).$number()<30 ? '00': '30';\t           $substring($t,0,14) & $m & \":00\" & $substring($t,-1);\t           )\t   };\t\t   /* return object of 'now' and 'next' value objects */\t   {\t       \"now\": payload[from=$keyis($now())],\t       \"next\": payload[from=$keyis($tstep(30))]\t   };\t   )",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 650,
        "y": 420,
        "wires": [
            [
                "be04e63b7258b035"
            ]
        ]
    },
    {
        "id": "3797b648d315c3a1",
        "type": "change",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Read Array",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "OctAgileTariff",
                "tot": "flow",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 420,
        "wires": [
            [
                "4430da6cfe290e39"
            ]
        ]
    },
    {
        "id": "bc4c506918ed4d9e",
        "type": "change",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Import Low",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "import",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "sample",
                "pt": "msg",
                "to": "15",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "/* look at latest prices, sorted by ascending import cost     */\t/* pick the lowest <sample size>, create new object for each  */\t/* with {date, from, upto, cost} Sort by date & time          */\t\tpayload[[48..95]]^(import)[[0..$$.sample-1]].{\t   \"from\": from,\t   \"upto\": upto,\t   \"date\": date,\t   \"timefrom\": timefrom,\t   \"timeupto\": timeupto,\t   \"value\": import\t}^(from)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 220,
        "wires": [
            [
                "aa94392fea62febc"
            ]
        ]
    },
    {
        "id": "b98e955f8996efa2",
        "type": "change",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Read Array",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "OctAgileTariff",
                "tot": "flow",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 130,
        "y": 220,
        "wires": [
            [
                "bc4c506918ed4d9e",
                "a28359905d33b762"
            ]
        ]
    },
    {
        "id": "c63c0e9f64999a1e",
        "type": "inject",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Poll every 5 mins",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "*/5 0-23 * * *",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 180,
        "wires": [
            [
                "b98e955f8996efa2"
            ]
        ]
    },
    {
        "id": "a28359905d33b762",
        "type": "change",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Export High",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "export",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "sample",
                "pt": "msg",
                "to": "15",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "/* for export values - as for import but */\t/* sorted from highest to lowest, top <n> */\t\tpayload[[48..95]]^(>export)[[0..$$.sample-1]].{\t   \"from\": from,\t   \"upto\": upto,\t   \"date\": date,\t   \"timefrom\": timefrom,\t   \"timeupto\": timeupto,\t   \"value\": export\t}^(from)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 260,
        "wires": [
            [
                "aa94392fea62febc"
            ]
        ]
    },
    {
        "id": "59f0bbc0e3c76b0d",
        "type": "change",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Groups",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "/* get start and end indexes, and zip into a sequence array of [start, end]                */\t/* map this array of sequences to an array of objects, one for each sequence to include    */\t/* sequence number, index range, date, start time, stop time, count of half-hours          */\t/* duration, and average (sum of values in sequence divided by count of items in sequence) */\t\t(\t   $chain:=$zip(payload[position=\"start\"].index, payload[position=\"end\"].index);\t   $map($chain, function($item, $index) {\t       (\t        $aa:=payload[$a:=$item[0]];\t        $bb:=payload[$b:=$item[1]];\t        $count:=$b-$a+1;\t        {\t        \"mode\": topic,\t        \"sample\": sample,\t        \"sequence\": $index+1,\t        \"range\": ($a+1) & \"-\" & ($b+1),\t        \"from\": $aa.from,\t        \"upto\":  $bb.upto,\t        \"date\": $aa.date,\t        \"timefrom\": $aa.timefrom,\t        \"timeupto\": $bb.timeupto,\t        \"periods\": $count,\t        \"duration\": $count*30,\t        \"average\": $round(($sum(payload[[$a..$b]].value)/$count)*1000)/1000\t    })\t   })^(from)[];\t)\t\t/* (>duration) gets longest periods first, however (from) sorts           */\t/* chronologically, which is required for correct display on tariff graph */\t/* final [] places result into an array even if only one sequence group   */\t",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 320,
        "wires": [
            [
                "8a65a4744d5f228a"
            ]
        ]
    },
    {
        "id": "aa94392fea62febc",
        "type": "change",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Sequence V2",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "/* For Version 2 - variable change needed  */\t/* note index position, and test if items  */\t/* are consecutive - forwards and backwards */\t/* set position as only, start, mid, end */\t\tpayload#$v.(\t   $last:=$v<1 ? false : from=%.payload[$v-1].upto;\t   $next:=upto=%.payload[$v+1].from;\t   $position:=(\t       $last ? ($next ? \"middle\" : \"end\") : ($next ? \"start\" : \"only\")\t   );\t   {\t       \"from\": from,\t       \"upto\": upto,\t       \"date\": date,\t       \"timefrom\": timefrom,\t       \"timeupto\": timeupto,\t       \"value\": value,\t       \"index\": $v,\t       \"link_last\": $last,\t       \"link_next\": $next,\t       \"position\": $position\t}\t)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 220,
        "wires": [
            [
                "59f0bbc0e3c76b0d",
                "224dc5d34ebe8967"
            ]
        ]
    },
    {
        "id": "87bddd29d5e5ab90",
        "type": "link in",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Daily",
        "links": [
            "56dd710454ea2e25"
        ],
        "x": 165,
        "y": 260,
        "wires": [
            [
                "bc4c506918ed4d9e",
                "a28359905d33b762"
            ]
        ]
    },
    {
        "id": "224dc5d34ebe8967",
        "type": "join",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Join",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "num",
        "reduceFixup": "",
        "x": 650,
        "y": 220,
        "wires": [
            [
                "3c01c3e92c0898b2"
            ]
        ]
    },
    {
        "id": "8a65a4744d5f228a",
        "type": "join",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Join",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "num",
        "reduceFixup": "",
        "x": 510,
        "y": 320,
        "wires": [
            [
                "a92b801c291d33d0"
            ]
        ]
    },
    {
        "id": "3c01c3e92c0898b2",
        "type": "change",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Save Best",
        "rules": [
            {
                "t": "set",
                "p": "OctAgileBest",
                "pt": "flow",
                "to": "payload",
                "tot": "msg",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 790,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "03b0c5c88010997c",
        "type": "change",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Save Period",
        "rules": [
            {
                "t": "set",
                "p": "OctAgilePeriod",
                "pt": "flow",
                "to": "payload",
                "tot": "msg",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 790,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "339092c8ec953466",
        "type": "ha-sensor",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Octopus Agile Sequences",
        "entityConfig": "6f8158bd34274dd3",
        "version": 0,
        "state": "$count(payload.export) + $count(payload.import)",
        "stateType": "jsonata",
        "attributes": [
            {
                "property": "export_array",
                "value": "payload.export",
                "valueType": "msg"
            },
            {
                "property": "import_array",
                "value": "payload.import",
                "valueType": "msg"
            },
            {
                "property": "both_array",
                "value": "payload.both",
                "valueType": "msg"
            },
            {
                "property": "bid_offer_spread",
                "value": "$min(payload.import.average)-$max(payload.export.average)",
                "valueType": "jsonata"
            }
        ],
        "inputOverride": "allow",
        "outputProperties": [],
        "x": 830,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "d8bb3057287698de",
        "type": "link in",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Daily",
        "links": [
            "56dd710454ea2e25"
        ],
        "x": 535,
        "y": 400,
        "wires": [
            [
                "4430da6cfe290e39"
            ]
        ]
    },
    {
        "id": "a92b801c291d33d0",
        "type": "change",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Table",
        "rules": [
            {
                "t": "set",
                "p": "payload.both",
                "pt": "msg",
                "to": "$append(payload.import, payload.export)\t",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 320,
        "wires": [
            [
                "03b0c5c88010997c",
                "339092c8ec953466",
                "cbda3fa2b3b2f7be"
            ]
        ]
    },
    {
        "id": "56dd710454ea2e25",
        "type": "link out",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Daily Update",
        "mode": "link",
        "links": [
            "87bddd29d5e5ab90",
            "d8bb3057287698de"
        ],
        "x": 955,
        "y": 80,
        "wires": []
    },
    {
        "id": "ee45b426f60a08a0",
        "type": "inject",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "Half Hour",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "*/30 0-23 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 420,
        "wires": [
            [
                "a9942de6076269cf"
            ]
        ]
    },
    {
        "id": "a9942de6076269cf",
        "type": "delay",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "10s",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 270,
        "y": 420,
        "wires": [
            [
                "3797b648d315c3a1"
            ]
        ]
    },
    {
        "id": "4ea83473eb8ac581",
        "type": "bigtimer",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "outtopic": "",
        "outpayload1": "",
        "outpayload2": "",
        "name": "Big Timer",
        "comment": "",
        "lat": 0,
        "lon": 0,
        "starttime": "975",
        "endtime": "990",
        "starttime2": 0,
        "endtime2": 0,
        "startoff": 0,
        "endoff": 0,
        "startoff2": 0,
        "endoff2": 0,
        "offs": 0,
        "outtext1": "",
        "outtext2": "",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": 0,
        "month7": 0,
        "day8": 0,
        "month8": 0,
        "day9": 0,
        "month9": 0,
        "day10": 0,
        "month10": 0,
        "day11": 0,
        "month11": 0,
        "day12": 0,
        "month12": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": 0,
        "xmonth7": 0,
        "xday8": 0,
        "xmonth8": 0,
        "xday9": 0,
        "xmonth9": 0,
        "xday10": 0,
        "xmonth10": 0,
        "xday11": 0,
        "xmonth11": 0,
        "xday12": 0,
        "xmonth12": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": true,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 100,
        "y": 140,
        "wires": [
            [
                "63bba87f93e0eaae",
                "db6ebccc4bb88b8d"
            ],
            [],
            []
        ]
    },
    {
        "id": "cbda3fa2b3b2f7be",
        "type": "link out",
        "z": "9157fc893b015ee8",
        "g": "e42010beae8f7fa5",
        "name": "To Charge Schedule",
        "mode": "link",
        "links": [
            "238e039b0f1ffbdc"
        ],
        "x": 785,
        "y": 380,
        "wires": []
    },
    {
        "id": "238e039b0f1ffbdc",
        "type": "link in",
        "z": "9157fc893b015ee8",
        "name": "Set Charge Schedule",
        "links": [
            "cbda3fa2b3b2f7be"
        ],
        "x": 55,
        "y": 500,
        "wires": [
            [
                "8cda00f0516a8127",
                "c03ee97b32ccb10f"
            ]
        ]
    },
    {
        "id": "518a355ef4becb56",
        "type": "api-call-service",
        "z": "9157fc893b015ee8",
        "name": "Turn on Charging",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "number",
        "service": "set_value",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "number.my_home_backup_reserve"
        ],
        "data": "{\"value\":\"100\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 670,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "f88818ec45c50a1a",
        "type": "ha-sensor",
        "z": "9157fc893b015ee8",
        "name": "Lowest Rate",
        "entityConfig": "0d2b39d0fae3c433",
        "version": 0,
        "state": "payload",
        "stateType": "msg",
        "attributes": [],
        "inputOverride": "allow",
        "outputProperties": [],
        "x": 830,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "b52edcadddbb96b5",
        "type": "api-call-service",
        "z": "9157fc893b015ee8",
        "name": "Turn off Charging",
        "server": "c525665.4e02f98",
        "version": 5,
        "debugenabled": false,
        "domain": "number",
        "service": "set_value",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "number.my_home_backup_reserve"
        ],
        "data": "{\"value\":\"16\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 730,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "1a54182aa32822c7",
        "type": "inject",
        "z": "9157fc893b015ee8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 560,
        "wires": [
            [
                "518a355ef4becb56"
            ]
        ]
    },
    {
        "id": "1440a4ab864d5674",
        "type": "inject",
        "z": "9157fc893b015ee8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 700,
        "wires": [
            [
                "b52edcadddbb96b5"
            ]
        ]
    },
    {
        "id": "f9a7c692d509a72b",
        "type": "split",
        "z": "9157fc893b015ee8",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 370,
        "y": 500,
        "wires": [
            [
                "82a05b89cefd191d"
            ]
        ]
    },
    {
        "id": "c03ee97b32ccb10f",
        "type": "change",
        "z": "9157fc893b015ee8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.import",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 200,
        "y": 500,
        "wires": [
            [
                "f9a7c692d509a72b"
            ]
        ]
    },
    {
        "id": "82a05b89cefd191d",
        "type": "join",
        "z": "9157fc893b015ee8",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload.average",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "num",
        "reduceFixup": "",
        "x": 510,
        "y": 500,
        "wires": [
            [
                "d7700745263f047e"
            ]
        ]
    },
    {
        "id": "d7700745263f047e",
        "type": "function",
        "z": "9157fc893b015ee8",
        "name": "function 1",
        "func": "const sum = msg.payload.average.reduce((a, b) => a + b, 0);\nconst avg = (sum / msg.payload.average.length) || 0;\nconst rounded = Math.round(avg * 100) / 10000\nvar msg1 = { payload: rounded }\nreturn msg1;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 500,
        "wires": [
            [
                "f88818ec45c50a1a"
            ]
        ]
    },
    {
        "id": "8cda00f0516a8127",
        "type": "function",
        "z": "9157fc893b015ee8",
        "name": "Check Time Array",
        "func": "// Assuming msg.payload has a property named 'import', which is an array of objects containing datetime, timefrom, and timeupto properties\nconst currentTime = new Date();\nconst currentHour = currentTime.getHours();\nconst currentMinute = currentTime.getMinutes();\n\n// Check if msg.payload has 'import' property\nif (msg.payload.import) {\n    node.warn(\"In array loop\");\n\n    // Loop through the array\n    msg.payload.import.forEach((item, index) => {\n        // Parse date and time from the item\n        const fromitemDateTime = new Date(item.from); // Assuming item.from is in the format '2023-11-30T23:00:00Z'\n        const fromitemHour = fromitemDateTime.getHours();\n        const fromitemMinute = fromitemDateTime.getMinutes();\n        const uptoitemDateTime = new Date(item.upto); // Assuming item.upto is in the format '2023-11-30T23:00:00Z'\n        const uptoitemHour = uptoitemDateTime.getHours();\n        const uptoitemMinute = uptoitemDateTime.getMinutes();\n\n        // Log information about the key being checked\n        node.warn(`Checking key ${index}`);\n        // Log extracted times for debugging\n        node.warn(`Extracted times: from ${fromitemHour}:${fromitemMinute} to ${uptoitemHour}:${uptoitemMinute}`);\n\n        // Convert times to minutes for easier comparison\n        const currentTimeInMinutes = currentHour * 60 + currentMinute;\n        const fromTimeInMinutes = fromitemHour * 60 + fromitemMinute;\n        const uptoTimeInMinutes = uptoitemHour * 60 + uptoitemMinute;\n\n        // Check if the current date is within the specified date range\n        if (\n            currentTime.toISOString().split('T')[0] >= fromitemDateTime.toISOString().split('T')[0] &&\n            currentTime.toISOString().split('T')[0] <= uptoitemDateTime.toISOString().split('T')[0]\n        ) {\n            // Check if the current time is within the specified range\n            if (\n                (currentTimeInMinutes >= fromTimeInMinutes && currentTimeInMinutes <= uptoTimeInMinutes) ||\n                (fromitemHour > uptoitemHour && (currentTimeInMinutes <= uptoTimeInMinutes || currentTimeInMinutes >= fromTimeInMinutes))\n            ) {\n                // Current time is within the range\n                item.isWithinRange = true;\n                \n\n                // Log information about the matching time window\n                node.warn(`Match found: ${item.from} to ${item.upto}`);\n            } else {\n                // Current time is outside the range\n                item.isWithinRange = false;\n                \n            }\n        } else {\n            // Current date is outside the specified date range\n            item.isWithinRange = false;\n\n        }\n\n        // Update the original array with the new property\n        if (item.isWithinRange === true) {\n            msg.payload=true;\n        \n        } else {\n            msg.payload=false;\n        }\n        node.warn(`Item isWithinRange: ${item.isWithinRange}`);\n    });\n} else {\n    node.warn(\"No 'import' property found in msg.payload\");\n}\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 620,
        "wires": [
            [
                "fd75783bd07d7494"
            ]
        ]
    },
    {
        "id": "fd75783bd07d7494",
        "type": "switch",
        "z": "9157fc893b015ee8",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 620,
        "wires": [
            [
                "518a355ef4becb56"
            ],
            [
                "96e445d1e59c18be"
            ]
        ]
    },
    {
        "id": "96e445d1e59c18be",
        "type": "gate",
        "z": "9157fc893b015ee8",
        "name": "",
        "controlTopic": "control",
        "defaultState": "open",
        "openCmd": "open",
        "closeCmd": "close",
        "toggleCmd": "toggle",
        "defaultCmd": "default",
        "statusCmd": "status",
        "persist": false,
        "storeName": "memory",
        "x": 530,
        "y": 660,
        "wires": [
            [
                "b52edcadddbb96b5"
            ]
        ]
    },
    {
        "id": "337dd8673db85d99",
        "type": "change",
        "z": "9157fc893b015ee8",
        "name": "Manual Overide",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "control",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "true",
                "fromt": "bool",
                "to": "close",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "false",
                "fromt": "bool",
                "to": "open",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 780,
        "wires": [
            [
                "96e445d1e59c18be"
            ]
        ]
    },
    {
        "id": "9d316023c91a2dbd",
        "type": "trigger-state",
        "z": "9157fc893b015ee8",
        "name": "Manual Charge",
        "server": "c525665.4e02f98",
        "version": 4,
        "inputs": 0,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.manual_charge_battery",
        "entityIdType": "exact",
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": ""
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "habool",
        "enableInput": false,
        "x": 140,
        "y": 780,
        "wires": [
            [
                "337dd8673db85d99"
            ],
            [
                "337dd8673db85d99",
                "5e46475ab7e7d5c2"
            ]
        ]
    },
    {
        "id": "5e46475ab7e7d5c2",
        "type": "switch",
        "z": "9157fc893b015ee8",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 720,
        "wires": [
            [
                "518a355ef4becb56"
            ],
            [
                "b52edcadddbb96b5"
            ]
        ]
    }
]
